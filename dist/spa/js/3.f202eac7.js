(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"0589":function(t,e,o){"use strict";var i=o("6f31"),n=o.n(i);n.a},"0590":function(t){t.exports=JSON.parse('{"title":"交互","icon":"payment","items":[{"text":"水管-横向","icon":"statics/img/gdz3.svg","info":{"type":"bizier-curve-arrow","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":100,"y":100,"w":300,"h":20},"backColor":"transparent","foreColor":"rgb(115,222,69)","zIndex":1,"transform":0,"lineWidth":2,"points":[{"x":20,"y":20},{"x":20,"y":100},{"x":200,"y":100},{"x":200,"y":20}]}}},{"text":"历史数据","icon":"statics/img/historyReport.png","info":{"type":"web-record","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":100,"y":100,"w":450,"h":380},"backColor":"#ffffff","foreColor":"#000","zIndex":1,"transform":0,"lineWidth":2,"points":[{"x":20,"y":20},{"x":20,"y":100},{"x":200,"y":100},{"x":200,"y":20}]}}}]}')},1628:function(t){t.exports=JSON.parse('{"title":"图表","icon":"insert_chart","opened":false,"items":[{"text":"line","icon":"show_chart","isFontIcon":true,"info":{"type":"chart-line","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":200,"h":200},"backColor":"white","zIndex":1}}},{"text":"step line","icon":"show_chart","isFontIcon":true,"info":{"type":"chart-line-step","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":200,"h":200},"backColor":"white","zIndex":1}}},{"text":"bar","icon":"bar_chart","isFontIcon":true,"info":{"type":"chart-bar","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":200,"h":200},"backColor":"white","zIndex":1}}},{"text":"pie","icon":"pie_chart","isFontIcon":true,"info":{"type":"chart-pie","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":300,"h":300},"backColor":"white","zIndex":1}}},{"text":"gauge","icon":"av_timer","isFontIcon":true,"info":{"type":"chart-gauge","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":300,"h":300},"backColor":"white","zIndex":1}}},{"text":"","icon":"statics/img/s01.png","info":{"type":"chart-watera","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":300,"h":300},"backColor":" ","zIndex":1}}}]}')},2364:function(t,e,o){"use strict";var i=o("cbcf"),n=o.n(i);n.a},2713:function(t,e,o){},"29ed":function(t,e,o){"use strict";var i=o("9279"),n=o.n(i);n.a},"449f":function(t,e,o){"use strict";var i=o("8646"),n=o.n(i);n.a},"542a":function(t,e,o){},"59b2":function(t,e,o){},"60ab":function(t,e,o){"use strict";var i=o("542a"),n=o.n(i);n.a},"6f31":function(t,e,o){},"7c63":function(t,e,o){},8646:function(t,e,o){},"8de3":function(t){t.exports=JSON.parse('{"title":"基本","icon":"payment","opened":false,"items":[{"text":"Text","icon":"text_fields","isFontIcon":true,"info":{"type":"text","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{"sensor_unit":""}},"style":{"position":{"x":0,"y":0,"w":100,"h":30},"backColor":"transparent","foreColor":"#000000","zIndex":1,"transform":0,"text":"Test","textAlign":"center","fontSize":14,"fontFamily":"Arial"}}},{"text":"Image","icon":"photo_size_select_actual","isFontIcon":true,"info":{"type":"image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":200,"h":200},"backColor":"transparent","zIndex":1,"transform":0,"url":""}}},{"text":"Triangle","icon":"change_history","isFontIcon":true,"info":{"type":"triangle","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":200,"h":200},"backColor":"transparent","foreColor":"grey","zIndex":1,"transform":0}}},{"text":"Rect","icon":"stop","isFontIcon":true,"info":{"type":"rect","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":100,"h":200},"backColor":"transparent","foreColor":"grey","zIndex":1,"transform":0,"radius":0}}},{"text":"Circular","icon":"fiber_manual_record","isFontIcon":true,"info":{"type":"circular","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":200,"h":200},"backColor":"transparent","foreColor":"grey","zIndex":1,"transform":0}}},{"text":"Line","icon":"remove","isFontIcon":true,"info":{"type":"line","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":100,"y":100,"w":300,"h":30},"backColor":"transparent","foreColor":"grey","zIndex":1,"transform":0,"lineWidth":2}}},{"text":"箭头","icon":"arrow_forward","isFontIcon":true,"info":{"type":"line-arrow","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":100,"y":100,"w":300,"h":80},"backColor":"transparent","foreColor":"grey","zIndex":1,"transform":0,"lineWidth":2,"points":[{"x":0,"y":0},{"x":0,"y":80},{"x":150,"y":80},{"x":150,"y":40},{"x":300,"y":40}]}}}]}')},9022:function(t,e,o){"use strict";var i=o("2713"),n=o.n(i);n.a},9279:function(t,e,o){},"982c":function(t){t.exports=JSON.parse('{"title":"SVG控件","icon":"payment","opened":false,"items":[{"text":"开关","icon":"statics/topo/svg/switch1.png","info":{"type":"buttom","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":100,"h":100},"backColor":"transparent","zIndex":1,"url":"statics/topo/svg/on1.svg"}}},{"text":"矩形","icon":"stop","isFontIcon":true,"info":{"type":"svg-image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":100,"h":100},"backColor":"transparent","zIndex":1,"url":"statics/topo/svg/ellipse2.svg"}}},{"text":"动画演示1","icon":"stop","isFontIcon":true,"info":{"type":"svg-image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":200,"h":200},"backColor":"transparent","zIndex":1,"url":"statics/topo/svg/demo1.svg"}}},{"text":"on","icon":"stop","isFontIcon":true,"info":{"type":"svg-image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":200,"h":200},"backColor":"transparent","zIndex":1,"url":"statics/topo/svg/on1.svg"}}},{"text":"off","icon":"statics/topo/office/g03.svg","isFontIcon":true,"info":{"type":"image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":40,"h":40},"backColor":"transparent","zIndex":1,"url":"statics/topo/svg/off1.svg"}}},{"text":"载入框1","icon":"stop","isFontIcon":true,"info":{"type":"svg-static","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":200,"h":200},"backColor":"transparent","zIndex":1,"url":"statics/topo/svg/loading/loading-1.svg"}}},{"text":"载入框2","icon":"stop","isFontIcon":true,"info":{"type":"svg-static","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":200,"h":200},"backColor":"transparent","zIndex":1,"url":"statics/topo/svg/loading/loading-2.svg"}}},{"text":"载入框3","icon":"stop","isFontIcon":true,"info":{"type":"svg-static","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":200,"h":200},"backColor":"transparent","zIndex":1,"url":"statics/topo/svg/loading/loading-3.svg"}}},{"text":"鱼","icon":"stop","isFontIcon":true,"info":{"type":"svg-static","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":200,"h":200},"backColor":"transparent","zIndex":1,"url":"statics/topo/svg/fish.svg"}}}]}')},af60:function(t,e,o){"use strict";var i=o("7c63"),n=o.n(i);n.a},c294:function(t){t.exports=JSON.parse('{"title":"图片","icon":"home","opened":false,"items":[{"text":"","icon":"statics/topo/office/index (9).svg","info":{"type":"image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":42,"h":42},"backColor":"transparent","zIndex":1,"url":"statics/topo/office/index (9).svg"}}},{"text":"","icon":"statics/topo/office/g73.svg","info":{"type":"image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":42,"h":42},"backColor":"transparent","zIndex":1,"url":"statics/topo/office/g73.svg"}}},{"text":"","icon":"statics/topo/office/g01.svg","info":{"type":"image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":42,"h":42},"backColor":"transparent","zIndex":1,"url":"statics/topo/office/g01.svg"}}},{"text":"","icon":"statics/topo/office/g02.svg","info":{"type":"image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":42,"h":42},"backColor":"transparent","zIndex":1,"url":"statics/topo/office/g02.svg"}}},{"text":"","icon":"statics/topo/office/g03.svg","info":{"type":"image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":42,"h":42},"backColor":"transparent","zIndex":1,"url":"statics/topo/office/g03.svg"}}},{"text":"","icon":"statics/topo/office/20190701182101_368.png","info":{"type":"image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":142,"h":212},"backColor":"transparent","zIndex":1,"url":"statics/topo/office/20190701182101_368.png"}}},{"text":"","icon":"statics/topo/office/20190702170803_715.png","info":{"type":"image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":142,"h":212},"backColor":"transparent","zIndex":1,"url":"statics/topo/office/20190702170803_715.png"}}},{"text":"","icon":"statics/topo/office/20190701181428_161.png","info":{"type":"image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":142,"h":212},"backColor":"transparent","zIndex":1,"url":"statics/topo/office/20190701181428_161.png"}}},{"text":"","icon":"statics/topo/office/20190701181354_914.png","info":{"type":"image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":142,"h":212},"backColor":"transparent","zIndex":1,"url":"statics/topo/office/20190701181354_914.png"}}},{"text":"","icon":"statics/topo/office/GD.svg","info":{"type":"image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":142,"h":212},"backColor":"transparent","zIndex":1,"url":"statics/topo/office/GD.svg"}}},{"text":"","icon":"statics/topo/office/20190701181434_604.png","info":{"type":"image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":142,"h":112},"backColor":"transparent","zIndex":1,"url":"statics/topo/office/20190701181434_604.png"}}},{"text":"","icon":"statics/topo/office/20190701182105_431.png","info":{"type":"image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":142,"h":112},"backColor":"transparent","zIndex":1,"url":"statics/topo/office/20190701182105_431.png"}}},{"text":"蔬菜","icon":"stop","isFontIcon":true,"info":{"type":"image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":200,"h":200},"backColor":"transparent","zIndex":1,"url":"statics/topo/svg/sc01.svg"}}},{"text":"蔬菜2","icon":"stop","isFontIcon":true,"info":{"type":"image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":200,"h":200},"backColor":"transparent","zIndex":1,"url":"statics/topo/svg/sc02.svg"}}},{"text":"过滤网","icon":"stop","isFontIcon":true,"info":{"type":"image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":200,"h":200},"backColor":"transparent","zIndex":1,"url":"statics/topo/svg/r001.svg"}}}]}')},cbcf:function(t,e,o){},d449:function(t,e,o){"use strict";var i=o("ec2f"),n=o.n(i);n.a},de83:function(t,e,o){"use strict";var i=o("59b2"),n=o.n(i);n.a},ec2f:function(t,e,o){},f8cc:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"topo-editor"},[o("WresizePanel3",{staticClass:"full-height",scopedSlots:t._u([{key:"left",fn:function(){return[o("TopoToolbox",{ref:"topoToolbox",staticClass:"topo-toolbox"})]},proxy:!0},{key:"center",fn:function(){return[o("TopoMain",{ref:"topoMain",staticClass:"topo-main"})]},proxy:!0},{key:"right",fn:function(){return[o("TopoProperties",{ref:"topoProperties",staticClass:"topo-properties"})]},proxy:!0}])})],1)},n=[],a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"wresize-panel-3",on:{mouseup:function(e){return t.onMouseup(e)},mousemove:function(e){return t.onMousemove(e)}}},[o("div",{staticClass:"wresize-panel-left",style:{width:t.divLeft.width+"px"}},[t._t("left")],2),o("div",{staticClass:"wresize-handler-left",style:{left:t.divLeftHandler.left+"px"},on:{mousedown:function(e){return t.onMouseDownLeft(e)}}}),o("div",{staticClass:"wresize-panel-center",style:{left:t.divCenter.left+"px",right:t.divCenter.right+"px"}},[t._t("center")],2),o("div",{staticClass:"wresize-handler-right",style:{right:t.divRightHandler.right+"px"},on:{mousedown:function(e){return t.onMouseDownRight(e)}}}),o("div",{staticClass:"wresize-panel-right",style:{width:t.divRight.width+"px"}},[t._t("right")],2)])},s=[],r=(o("c5f6"),{name:"wresize-panel-3",props:{leftWidth:{type:Number,default:235},rightWidth:{type:Number,default:265},onResize:{type:Function,default:void 0}},data:function(){return{flag:"",disx:0,divLeft:{width:this.leftWidth,temp:0},divCenter:{left:this.leftWidth+5,right:this.rightWidth+5,temp:0},divRight:{width:this.rightWidth,temp:0},divLeftHandler:{left:this.leftWidth,temp:0},divRightHandler:{right:this.rightWidth,temp:0}}},methods:{onMouseDownLeft:function(t){this.flag="left";t.currentTarget;this.disx=t.pageX,this.divLeftHandler.temp=this.divLeftHandler.left,this.divLeft.temp=this.divLeft.width,this.divCenter.temp=this.divCenter.left},onMouseDownRight:function(t){this.flag="right";t.currentTarget;this.disx=t.pageX,this.divRightHandler.temp=this.divRightHandler.right,this.divRight.temp=this.divRight.width,this.divCenter.temp=this.divCenter.right},onMouseup:function(t){""!=this.flag&&(this.onResize&&this.onResize(this.flag),this.flag="")},onMousemove:function(t){if(1==t.which){if(this.flag){var e=t.pageX-this.disx;"left"==this.flag?(this.divLeftHandler.left=this.divLeftHandler.temp+e,this.divLeft.width=this.divLeft.temp+e,this.divCenter.left=this.divCenter.temp+e):"right"==this.flag&&(this.divRightHandler.right=this.divRightHandler.temp-e,this.divRight.width=this.divRight.temp-e,this.divCenter.right=this.divCenter.temp-e)}}else""!=this.flag&&(this.flag="")}}}),l=r,c=(o("0589"),o("2877")),p=Object(c["a"])(l,a,s,!1,null,null,null),d=p.exports,u=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"topo-toolbox"},[o("q-list",{staticClass:"full-height",attrs:{highlight:"",separator:""}},[t._l(t.toolbox,(function(e,i){return[o("q-expansion-item",{key:i,attrs:{icon:e.icon,label:e.title}},[o("div",{staticClass:"toolbox-group"},[t._l(e.items,(function(e,i){return[o("div",{key:i,staticClass:"toolbox-item",attrs:{draggable:"true"},on:{dragstart:function(o){return t.onDragstart(o,e)}}},[!0===e.isFontIcon?[o("div",{staticClass:"toolbox-item-icon"},[o("q-icon",{attrs:{name:e.icon,size:"30px"}})],1),o("div",{staticClass:"toolbox-item-text"},[t._v(t._s(e.text))])]:[o("div",{staticClass:"toolbox-item-icon"},[o("img",{staticClass:"topo-dom",staticStyle:{width:"100%"},attrs:{src:e.icon}})]),o("div",{staticClass:"toolbox-item-text"},[t._v(t._s(e.text))])]],2)]}))],2)])]}))],2)],1)},f=[],h=o("8de3"),m=o("1628"),g=o("c294"),y=o("982c"),b=o("0590"),v={name:"TopoToolbox",data:function(){return{toolbox:[],selectedIndex:-1}},methods:{onDragstart:function(t,e){console.log("onDragstart"),console.log(e);var o=JSON.stringify(e.info);t.dataTransfer.setData("my-info",o)}},mounted:function(){this.toolbox=[],this.toolbox.push(h),this.toolbox.push(m),this.toolbox.push(g),this.toolbox.push(y),this.toolbox.push(b)}},x=v,w=(o("9022"),Object(c["a"])(x,u,f,!1,null,null,null)),C=w.exports,O=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"topo-main q-pa-md q-gutter-sm"},[o("vue-ruler-tool",{staticStyle:{width:"100%",height:"calc(100% - 40px)"},attrs:{parent:!0,"is-scale-revise":!0}},[o("div",{staticClass:"topo-layer",class:{"topo-layer-view-selected":t.selectedIsLayer},style:t.layerStyle,attrs:{tabindex:"0",id:"surface-edit-layer"},on:{click:function(e){return t.onLayerClick(e)},mouseup:function(e){return t.onLayerMouseup(e)},mousemove:function(e){return t.onLayerMousemove(e)},mousedown:function(e){return t.onLayerMousedown(e)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:t.removeItem()},dragover:function(t){t.preventDefault()},drop:t.onDrop,keydown:[function(e){return(e.type.indexOf("key")||67===e.keyCode)&&e.ctrlKey?(e.stopPropagation(),t.copyItem(e)):null},function(e){return(e.type.indexOf("key")||86===e.keyCode)&&e.ctrlKey?(e.stopPropagation(),t.pasteItem(e)):null},function(e){return(e.type.indexOf("key")||90===e.keyCode)&&e.ctrlKey?(e.stopPropagation(),t.undo(e)):null},function(e){return(e.type.indexOf("key")||89===e.keyCode)&&e.ctrlKey?(e.stopPropagation(),t.redo(e)):null}]}},[t._l(t.configData.components,(function(e,i){return[o("div",{key:e.identifier,staticClass:"topo-layer-view",class:{"topo-layer-view-selected":void 0!=t.selectedComponentMap[e.identifier]},style:{left:e.style.position.x+"px",top:e.style.position.y+"px",width:e.style.position.w+"px",height:e.style.position.h+"px","background-color":e.style.backColor,zIndex:e.style.zIndex,borderWidth:e.style.borderWidth+"px",borderStyle:e.style.borderStyle,borderColor:e.style.borderColor,transform:e.style.transform?"rotate("+e.style.transform+"deg)":"rotate(0deg)"},attrs:{tabindex:"0"},on:{click:function(o){return o.stopPropagation(),t.clickComponent(i,e,o)},mousedown:function(o){return o.stopPropagation(),t.controlMousedown(e,o,i)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:t.removeItem()},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.moveItems("up"))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])||"button"in e&&2!==e.button||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.moveItems("right"))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.moveItems("down"))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.moveItems("left"))},function(e){return(e.type.indexOf("key")||67===e.keyCode)&&e.ctrlKey?(e.stopPropagation(),t.copyItem(e)):null},function(e){return(e.type.indexOf("key")||86===e.keyCode)&&e.ctrlKey?(e.stopPropagation(),t.pasteItem(e)):null},function(e){return(e.type.indexOf("key")||90===e.keyCode)&&e.ctrlKey?(e.stopPropagation(),t.undo(e)):null},function(e){return(e.type.indexOf("key")||89===e.keyCode)&&e.ctrlKey?(e.stopPropagation(),t.redo(e)):null}]}},[t.topoDatademo?o(t.parseView(e),{ref:"comp"+i,refInFor:!0,tag:"component",attrs:{detail:e,editMode:!0,selected:!!t.selectedComponentMap[e.identifier]}}):t._e(),o("div",{directives:[{name:"show",rawName:"v-show",value:t.selectedComponentMap[e.identifier],expression:"selectedComponentMap[component.identifier]"}],staticClass:"resize-left-top",on:{mousedown:function(o){return o.stopPropagation(),t.resizeMousedown(e,o,i,"resize-lt")}}}),o("div",{directives:[{name:"show",rawName:"v-show",value:t.selectedComponentMap[e.identifier],expression:"selectedComponentMap[component.identifier]"}],staticClass:"resize-left-center",on:{mousedown:function(o){return o.stopPropagation(),t.resizeMousedown(e,o,i,"resize-lc")}}}),o("div",{directives:[{name:"show",rawName:"v-show",value:t.selectedComponentMap[e.identifier],expression:"selectedComponentMap[component.identifier]"}],staticClass:"resize-left-bottom",on:{mousedown:function(o){return o.stopPropagation(),t.resizeMousedown(e,o,i,"resize-lb")}}}),o("div",{directives:[{name:"show",rawName:"v-show",value:t.selectedComponentMap[e.identifier],expression:"selectedComponentMap[component.identifier]"}],staticClass:"resize-right-top",on:{mousedown:function(o){return o.stopPropagation(),t.resizeMousedown(e,o,i,"resize-rt")}}}),o("div",{directives:[{name:"show",rawName:"v-show",value:t.selectedComponentMap[e.identifier],expression:"selectedComponentMap[component.identifier]"}],staticClass:"resize-right-center",on:{mousedown:function(o){return o.stopPropagation(),t.resizeMousedown(e,o,i,"resize-rc")}}}),o("div",{directives:[{name:"show",rawName:"v-show",value:t.selectedComponentMap[e.identifier],expression:"selectedComponentMap[component.identifier]"}],staticClass:"resize-right-bottom",on:{mousedown:function(o){return o.stopPropagation(),t.resizeMousedown(e,o,i,"resize-rb")}}}),o("div",{directives:[{name:"show",rawName:"v-show",value:t.selectedComponentMap[e.identifier],expression:"selectedComponentMap[component.identifier]"}],staticClass:"resize-center-top",on:{mousedown:function(o){return o.stopPropagation(),t.resizeMousedown(e,o,i,"resize-ct")}}}),o("div",{directives:[{name:"show",rawName:"v-show",value:t.selectedComponentMap[e.identifier],expression:"selectedComponentMap[component.identifier]"}],staticClass:"resize-center-bottom",on:{mousedown:function(o){return o.stopPropagation(),t.resizeMousedown(e,o,i,"resize-cb")}}})],1)]})),o("div",{staticClass:"topo-frame-selection",style:{width:t.frameSelectionDiv.width+"px",height:t.frameSelectionDiv.height+"px",top:t.frameSelectionDiv.top+"px",left:t.frameSelectionDiv.left+"px"}})],2)]),o("div",{staticStyle:{height:"40px","border-top":"#ccc solid 1px",position:"relative","background-color":"white"}},[o("div",{staticClass:"row",staticStyle:{position:"absolute",left:"0px",top:"0px"}},[o("div",{staticStyle:{"line-height":"40px",height:"40px"}},[t._v("\n        已选组件个数："+t._s(t.selectedComponents.length)+"\n      ")]),o("q-btn",{staticStyle:{"margin-left":"100px",height:"30px","margin-top":"5px"},attrs:{label:"预览",color:"primary",size:"xs"},on:{click:t.fullScreen}}),o("q-btn",{staticStyle:{"margin-left":"100px",height:"30px","margin-top":"5px"},attrs:{label:"清空",color:"primary",size:"xs"},on:{click:t.printData}}),o("q-btn",{staticStyle:{"margin-left":"100px",height:"30px","margin-top":"5px"},attrs:{label:"保存数据",color:"primary",size:"xs"},on:{click:t.showdialog}}),o("q-btn",{staticStyle:{"margin-left":"100px",height:"30px","margin-top":"5px"},attrs:{label:"首页",color:"primary",size:"xs"},on:{click:t.ToHome}})],1),o("div",{staticClass:"row",staticStyle:{position:"absolute",right:"10px",top:"0px"}},[o("div",{staticStyle:{"line-height":"40px",height:"40px",padding:"0px 5px"}},[t._v("\n        缩放\n      ")]),o("q-slider",{staticStyle:{width:"200px"},attrs:{min:30,max:200,step:1,label:"","label-value":t.selectedValue+"%",snap:""},model:{value:t.selectedValue,callback:function(e){t.selectedValue=e},expression:"selectedValue"}})],1)]),o("el-dialog",{attrs:{title:"添加项目",visible:t.alert_two,width:"30%"},on:{"update:visible":function(e){t.alert_two=e}}},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:16,offset:4}},[t.isid?o("Pctup",{attrs:{dargjsondata:t.dargjsondata,showname:t.showname,componentadata:t.componentadata,Projectnametlist:t.Projectnametlist},on:{saveData:t.saveData}}):t._e(),t.isid?t._e():o("Pctupid",{attrs:{dargjsondata:t.dargjsondata,showname:t.showname,componentadata:t.componentadata,Projectnametlist:t.Projectnametlist},on:{saveData:t.saveData}})],1)],1)],1),o("el-dialog",{staticClass:"dialogcss",attrs:{title:"项目展示",visible:t.alert,width:"50%"},on:{"update:visible":function(e){t.alert=e}}},[[o("Topotable",{attrs:{componentdata:t.componentdata,totalnum:t.totalnum},on:{delClick:t.delClick,getData:t.getData,handleClick:t.handleClick}})]],2)],1)},k=[],j=(o("8e6e"),o("8a81"),o("ac6a"),o("cadf"),o("06db"),o("456d"),o("7f7f"),o("f559"),o("9523")),_=o.n(j),D=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:t.rulerToggle,expression:"rulerToggle"}],staticClass:"ScaleBox",style:{width:t.windowWidth+"px",height:t.windowHeight+"px",position:t.position},attrs:{id:"rulerTool",onselectstart:"return false;"}},[o("div",{staticClass:"ScaleRuler_h",attrs:{id:"levelRuler"},on:{mousedown:function(e){return e.stopPropagation(),t.levelDragRuler(e)}}},t._l(t.xScale,(function(e,i){return o("span",{key:i,staticClass:"n",style:{left:50*i+2+"px"}},[t._v(t._s(e.id))])})),0),o("div",{staticClass:"ScaleRuler_v",attrs:{id:"verticalRuler"},on:{mousedown:function(e){return e.stopPropagation(),t.verticalDragRuler(e)}}},t._l(t.yScale,(function(e,i){return o("span",{key:i,staticClass:"n",style:{top:50*i+2+"px"}},[t._v(t._s(e.id))])})),0),o("div",{staticClass:"RefDot_h",style:{top:t.verticalDottedTop+"px"},attrs:{id:"levelDottedLine"}}),o("div",{staticClass:"RefDot_v",style:{left:t.levelDottedLeft+"px"},attrs:{id:"verticalDottedLine"}}),t._l(t.levelLineList,(function(e){return o("div",{key:e.id,staticClass:"RefLine_h",style:{top:e.top+"px"},attrs:{id:e.id,title:e.title},on:{mousedown:function(o){return t.dragLevelLine(e.id)}}})})),t._l(t.verticalLineList,(function(e){return o("div",{key:e.id,staticClass:"RefLine_v",style:{left:e.left+"px"},attrs:{id:e.id,title:e.title},on:{mousedown:function(o){return t.dragVerticalLine(e.id)}}})})),o("div",{staticStyle:{padding:"18px"},style:{left:t.contentLayout.left+"px",top:t.contentLayout.top+"px"},attrs:{id:"content"}},[t._t("default")],2)],2)},S=[],I={name:"VueRulerTool",components:{},props:{position:{type:String,default:"relative",validator:function(t){return-1!==["absolute","fixed","relative","static","inherit"].indexOf(t)}},isHotKey:{type:Boolean,default:!0},isScaleRevise:{type:Boolean,default:!1},presetLine:{type:Array,default:function(){return[]}},contentLayout:{type:Object,default:function(){return{top:0,left:0}}},parent:{type:Boolean,default:!1}},data:function(){return{windowWidth:0,windowHeight:0,xScale:[],yScale:[],topSpacing:0,leftSpacing:0,isDrag:!1,dragFlag:"",levelLineList:[],verticalLineList:[],levelDottedLeft:-999,verticalDottedTop:-999,rulerWidth:0,rulerHeight:0,dragLineId:"",keyCode:{r:82},rulerToggle:!0}},watch:{},mounted:function(){document.documentElement.addEventListener("mousemove",this.dottedLineMove,!0),document.documentElement.addEventListener("mouseup",this.dottedLineUp,!0),document.documentElement.addEventListener("keyup",this.keyboard,!0),this.init(),this.quickGeneration(this.presetLine);var t=this;window.onresize=function(){t.xScale=[],t.yScale=[],t.init()}},beforeDestroy:function(){document.documentElement.removeEventListener("mousemove",this.dottedLineMove,!0),document.documentElement.removeEventListener("mouseup",this.dottedLineUp,!0),document.documentElement.removeEventListener("keyup",this.keyboard,!0)},methods:{init:function(){this.box(),this.scaleCalc()},box:function(){if(this.isScaleRevise){for(var t=document.getElementById("content"),e=t.offsetLeft,o=t.offsetTop,i=0;i<e;i+=1)i%50===0&&i+50<=e&&this.xScale.push({id:i});for(var n=0;n<o;n+=1)n%50===0&&n+50<=o&&this.yScale.push({id:n})}if(this.parent){var a=window.getComputedStyle(this.$el.parentNode,null);this.windowWidth=parseInt(a.getPropertyValue("width"),10),this.windowHeight=parseInt(a.getPropertyValue("height"),10)}else this.windowWidth=document.documentElement.clientWidth-this.leftSpacing,this.windowHeight=document.documentElement.clientHeight-this.topSpacing;this.rulerWidth=document.getElementById("verticalRuler").clientWidth,this.rulerHeight=document.getElementById("levelRuler").clientHeight,this.topSpacing=document.getElementById("levelRuler").getBoundingClientRect().y,this.leftSpacing=document.getElementById("verticalRuler").getBoundingClientRect().x},scaleCalc:function(){for(var t=0;t<this.windowWidth;t+=1)t%50===0&&this.xScale.push({id:t});for(var e=0;e<this.windowHeight;e+=1)e%50===0&&this.yScale.push({id:e})},newLevelLine:function(){this.isDrag=!0,this.dragFlag="x"},newVerticalLine:function(){this.isDrag=!0,this.dragFlag="y"},dottedLineMove:function(t){switch(this.dragFlag){case"x":this.isDrag&&(this.verticalDottedTop=t.pageY-this.topSpacing);break;case"y":this.isDrag&&(this.levelDottedLeft=t.pageX-this.leftSpacing);break;case"l":this.isDrag&&(this.verticalDottedTop=t.pageY-this.topSpacing);break;case"v":this.isDrag&&(this.levelDottedLeft=t.pageX-this.leftSpacing);break;default:break}},dottedLineUp:function(t){var e=this;if(this.isDrag){switch(this.isDrag=!1,this.dragFlag){case"x":this.levelLineList.push({id:"levelLine"+this.levelLineList.length+1,title:t.pageY+1-this.topSpacing-18+"px",top:t.pageY-this.topSpacing+1});break;case"y":this.verticalLineList.push({id:"verticalLine"+this.verticalLineList.length+1,title:t.pageX+1-this.leftSpacing-18+"px",left:t.pageX-this.leftSpacing+1});break;case"l":var o,i,n,a;if(t.pageY-this.topSpacing<this.rulerHeight)this.levelLineList.forEach((function(t,n){t.id===e.dragLineId&&(o=n,i=t.id)})),this.levelLineList.splice(o,1,{id:i,title:"-600px",top:-600});else this.levelLineList.forEach((function(t,o){t.id===e.dragLineId&&(n=o,a=t.id)})),this.levelLineList.splice(n,1,{id:a,title:t.pageY+1-this.topSpacing-18+"px",top:t.pageY-this.topSpacing+1});break;case"v":var s,r,l,c;if(t.pageX-this.leftSpacing<this.rulerWidth)this.verticalLineList.forEach((function(t,o){t.id===e.dragLineId&&(s=o,r=t.id)})),this.verticalLineList.splice(s,1,{id:r,title:"-600px",left:-600});else this.verticalLineList.forEach((function(t,o){t.id===e.dragLineId&&(l=o,c=t.id)})),this.verticalLineList.splice(l,1,{id:c,title:t.pageX+2-this.leftSpacing-18+"px",left:t.pageX-this.leftSpacing+1});break;default:break}this.verticalDottedTop=this.levelDottedLeft=-10}},levelDragRuler:function(){this.newLevelLine()},verticalDragRuler:function(){this.newVerticalLine()},dragLevelLine:function(t){this.isDrag=!0,this.dragFlag="l",this.dragLineId=t},dragVerticalLine:function(t){this.isDrag=!0,this.dragFlag="v",this.dragLineId=t},keyboard:function(t){if(this.isHotKey)switch(t.keyCode){case this.keyCode.r:this.rulerToggle=!this.rulerToggle;break}},quickGeneration:function(t){var e=this;t!==[]&&t.forEach((function(t){switch(t.type){case"l":e.levelLineList.push({id:"levelLine"+e.levelLineList.length+1,title:t.site+"px",top:t.site});break;case"v":e.verticalLineList.push({id:"verticalLine"+e.verticalLineList.length+1,title:t.site+"px",left:t.site});break;default:break}}))}}},z=I,L=(o("60ab"),Object(c["a"])(z,D,S,!1,null,"b07c55f8",null)),P=L.exports,q=o("6e0e");o("6b54");var $=o("3693"),E=o("183a"),M=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.componentdata}},[o("el-table-column",{attrs:{type:"index",width:"50"}}),o("el-table-column",{attrs:{prop:"username",label:"创建人",width:"100"}}),o("el-table-column",{attrs:{prop:"showname",label:"创建人",width:"100"}}),o("el-table-column",{attrs:{prop:"projectname",label:"项目名称",width:"280"}}),o("el-table-column",{attrs:{prop:"create_date",label:"日期",width:"150"}}),o("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(o){return t.handleClick(e.row)}}},[t._v("导入")]),o("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(o){return t.delClick(e.row)}}},[t._v("删除")])]}}])})],1),o("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.totalnum},on:{"current-change":t.currentchange}})],1)},B=[],T={name:"Topotable",components:{},props:{componentdata:{},totalnum:{type:Number}},data:function(){return{page_size:10,current_page:1}},mounted:function(){console.log(this.componentdata)},methods:{currentchange:function(t){this.$emit("getData",t)},delClick:function(t){this.$emit("delClick",t)},handleClick:function(t){this.$emit("handleClick",t)}}},W=T,F=Object(c["a"])(W,M,B,!1,null,null,null),R=F.exports;function V(t,e){var o=t.x+t.width/2,i=t.y+t.height/2,n=t.width,a=t.height,s=e.x+e.width/2,r=e.y+e.height/2,l=e.width,c=e.height;return Math.abs(o-s)<(n+l)/2&&Math.abs(i-r)<(a+c)/2}var N=o("2f62"),H=(o("bc3a"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"上传","label-width":t.formLabelWidth}},[o("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{name:"file_name","with-credentials":"",limit:1,action:t.uploadUrl,data:t.form,beforeUpload:t.beforeUpload,"on-change":t.handleChange,"on-success":t.handleSuccess,"on-error":t.handleError,"file-list":t.fileList,"list-type":"picture-card","auto-upload":!1}},[o("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取项目图片")])],1)],1),o("el-form-item",{attrs:{label:"项目名称","label-width":t.formLabelWidth}},[o("span",[t._v(t._s(t.form.projectname))])]),o("el-form-item",{attrs:{label:"展示用户名","label-width":t.formLabelWidth}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.project_showname,callback:function(e){t.$set(t.form,"project_showname",e)},expression:"form.project_showname"}},t._l(t.showname,(function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),o("el-form-item",{attrs:{label:"备注说明",prop:"comment","label-width":t.formLabelWidth}},[o("el-input",{staticClass:"diainp",attrs:{"auto-complete":"off"},model:{value:t.form.comment,callback:function(e){t.$set(t.form,"comment",e)},expression:"form.comment"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitUpload("form")}}},[t._v("添 加")])],1)],1)}),U=[];function X(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,i)}return o}function Y(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?X(Object(o),!0).forEach((function(e){_()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):X(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var A={name:"Pctup",props:["showname"],computed:Y({},Object(N["d"])({topoData:function(t){return t.topoEditor.topoData}})),data:function(){return{uploadUrl:"/api/drag/add",dialogFormVisible:!1,form:{file_name:"",projectname:"",user_account:"",project_showname:"",project_image:"",dargjsondata:"",comment:""},rules:{projectname:[{required:!0,message:"请输入项目名称",trigger:"blur"}]},formLabelWidth:"120px",fileList:[],imgurl:"",isimg:!0}},watch:{"topoData.name":function(t){this.form.projectname=this.topoData.name}},mounted:function(){this.form.projectname=this.topoData.name,this.form.user_account=localStorage.getItem("user_account"),console.log(this.topoData),this.form.dargjsondata=JSON.stringify(this.topoData)},methods:Y(Y({},Object(N["c"])("topoEditor",["gettopoEditor"])),{},{submitUpload:function(t){var e=this.topoData;if(e.name=this.form.projectname,this.form.dargjsondata=JSON.stringify(e),this.gettopoEditor(e),"图层"==this.form.projectname)this.$message.error("请选者项目名");else{var o=this;o.$refs[t].validate((function(t){if(!t)return console.log("验证失败"),!1;o.$refs.upload.submit(),localStorage.setItem("topoData",JSON.stringify(e)),o.$emit("saveData")}))}},beforeUpload:function(t){return console.log("beforeUpload",t.name),!0},handleSuccess:function(t,e,o){console.log("handleSuccess",e.name);var i=this;0==t.ret_code?(this.$message({message:"创建成功",type:"success"}),this.isimg=!1):this.$message.error("创建失败"),i.fileList=[],i.form.project_name=this.projectname,i.form.user_account=localStorage.getItem("user_account"),i.form.project_showname="",i.form.comment="",this.form.dargjsondata=this.dargjsondata,i.$refs.upload.clearFiles(),this.$emit("saveData")},handleError:function(t,e,o){console.log("handleError",e.name),this.$message("操作失败"),this.$refs.upload.clearFiles()},handleChange:function(t,e){console.log("handleChange",t.name);var o=new FileReader;o.onload=function(t){},o.readAsBinaryString(t.raw)}})},K=A,J=(o("449f"),Object(c["a"])(K,H,U,!1,null,"443fe58a",null)),G=J.exports,Q=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"上传","label-width":t.formLabelWidth}},[o("el-upload",{ref:"upload",class:{hide:t.hideUpload},attrs:{action:"api/drag/imgadd","list-type":"picture-card","on-success":t.handleAvatarSuccess,data:t.uploadData,"before-upload":t.beforeAvatarUpload,"on-change":t.onchange,"file-list":t.fileList,"on-remove":t.onremove,"auto-upload":!1,limit:1}},[o("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取项目图片")])],1)],1),o("el-form-item",{attrs:{label:"项目名称","label-width":t.formLabelWidth}},[o("span",[t._v(t._s(t.form.projectname))])]),o("el-form-item",{attrs:{label:"展示用户名","label-width":t.formLabelWidth}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.project_showname,callback:function(e){t.$set(t.form,"project_showname",e)},expression:"form.project_showname"}},t._l(t.showname,(function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),o("el-form-item",{attrs:{label:"备注说明",prop:"comment","label-width":t.formLabelWidth}},[o("el-input",{staticClass:"diainp",attrs:{"auto-complete":"off"},model:{value:t.form.comment,callback:function(e){t.$set(t.form,"comment",e)},expression:"form.comment"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitUpload()}}},[t._v("添 加(id)")])],1)],1)},Z=[];function tt(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,i)}return o}function et(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?tt(Object(o),!0).forEach((function(e){_()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):tt(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var ot={name:"Pctup",props:["componentadata","showname","Projectnametlist"],computed:et({},Object(N["d"])({topoData:function(t){return t.topoEditor.topoData}})),data:function(){return{uploadUrl:"http://localhost//api/drag/imgadd",dialogFormVisible:!1,form:{file_name:"",projectname:"",user_account:"",project_showname:"",project_image:"",dargjsondata:"",comment:""},rules:{projectname:[{required:!0,message:"请输入项目名称",trigger:"blur"}]},fileList:[{name:"",url:""}],formLabelWidth:"120px",imageUrl:"",uploadData:{},isimg:!0,hideUpload:!1}},watch:{"topoData.name":function(t){this.form.projectname=this.topoData.name}},mounted:function(){console.log(this.topoData),this.form.projectname=this.topoData.name,this.form.user_account=localStorage.getItem("user_account"),this.form.dargjsondata=JSON.stringify(this.topoData),this.form.project_showname=this.componentadata.project_showname,this.hideUpload=this.fileList.length>=1,this.form.comment=this.componentadata.comment,this.fileList[0].name="图片",this.fileList[0].url=this.componentadata.project_image},methods:et(et({},Object(N["c"])("topoEditor",["gettopoEditor"])),{},{submitUpload:function(t){var e=this,o=this.topoData;o.name=this.form.projectname,this.uploadData.id=this.componentadata._id,this.$refs.upload.submit(),this.$axios.post("/api/drag/change",{projectname:this.form.projectname,project_showname:this.form.project_showname,dargjsondata:JSON.stringify(o),comment:this.form.comment,id:this.componentadata._id}).then((function(t){console.log(t),e.$message({message:"修改成功",type:"success"}),localStorage.setItem("topoData",e.topoData),e.gettopoEditor(o),e.$emit("saveData")}))},onchange:function(){this.hideUpload=!0},handleAvatarSuccess:function(t,e){this.imageUrl=URL.createObjectURL(e.raw)},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,o=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),o||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&o},onremove:function(){console.log("shang"),this.hideUpload=!1}})},it=ot,nt=(o("2364"),Object(c["a"])(it,Q,Z,!1,null,null,null)),at=nt.exports,st=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"q-pa-md"},[o("div",{staticClass:"q-gutter-sm row items-start"},[o("q-uploader",{staticStyle:{"max-width":"300px"},attrs:{url:"http://localhost:4444/upload"}}),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitUpload("form")}}},[t._v("添 加")])],1)],1)])},rt=[],lt={name:"Pctup",props:["projectname","dargjsondata","componentadata"],data:function(){return{uploadUrl:"/api/drag/add",dialogFormVisible:!1,form:{file_name:"",projectname:"",user_account:"",project_showname:"",project_image:"",dargjsondata:"",comment:""},rules:{projectname:[{required:!0,message:"请输入项目名称",trigger:"blur"}]},formLabelWidth:"120px",fileList:[],imgurl:"",isimg:!0}},mounted:function(){this.form.projectname=this.projectname,this.form.user_account=localStorage.getItem("user_account"),this.form.dargjsondata=this.dargjsondata,console.log(this.dargjsondata),console.log(this.componentadata),this.componentadata&&(console.log("this.componentadata"),this.form.project_name=this.componentadata.projectname,this.form.project_showname=this.componentadata.project_showname,this.form.comment=this.componentadata.comment)},methods:{submitUpload:function(t){console.log(t);var e=this;this.isimg?console.log("ddd"):e.$refs[t].validate((function(t){if(!t)return console.log("验证失败"),!1;console.log(e.$refs.upload.submit()),e.$refs.upload.submit()}))},beforeUpload:function(t){return console.log("beforeUpload",t.name),!0},handleSuccess:function(t,e,o){console.log("handleSuccess",e.name);var i=this;0==t.ret_code?(this.$message({message:"创建成功",type:"success"}),this.isimg=!1):this.$message.error("创建失败"),i.fileList=[],i.form.project_name="",i.form.user_account=this.projectname,i.form.project_showname="",i.form.comment="",this.form.dargjsondata=this.dargjsondata,i.$refs.upload.clearFiles(),this.$emit("saveData")},handleError:function(t,e,o){console.log("handleError",e.name),this.$message("操作失败"),this.$refs.upload.clearFiles()},handleChange:function(t,e){console.log(t),console.log("handleChange",t.name);var o=new FileReader;o.onload=function(t){},o.readAsBinaryString(t.raw)}}},ct=lt,pt=(o("af60"),Object(c["a"])(ct,st,rt,!1,null,"05b9e90e",null)),dt=pt.exports;function ut(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,i)}return o}function ft(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?ut(Object(o),!0).forEach((function(e){_()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):ut(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var ht={name:"TopoMain",extends:q["a"],components:{VueRulerTool:P,Topotable:R,Pctup:G,Pctupid:at,Pctupquasar:dt},computed:ft(ft({},Object(N["d"])({topoEditor:function(t){return t.topoEditor.topoData},topoData:function(t){return t.topoEditor.topoData},topoDatademo:function(t){return t.topoEditor.selectedComponentMapdemo},selectedComponents:function(t){return t.topoEditor.selectedComponents},selectedComponentMap:function(t){return t.topoEditor.selectedComponentMap},configData:function(t){return t.topoEditor.topoData},selectedIsLayer:function(t){return t.topoEditor.selectedIsLayer},copySrcItems:function(t){return t.topoEditor.copySrcItems},copyCount:function(t){return t.topoEditor.copyCount},userAccount:function(t){return t.example.userAccount},Projectnametlist:function(t){return t.example.Projectnametlist}})),{},{layerStyle:function(){var t=this.selectedValue/100,e=["transform:scale(".concat(t,")")];this.configData.layer.backColor&&e.push("background-color: ".concat(this.configData.layer.backColor)),this.configData.layer.backgroundImage&&e.push('background-image: url("'.concat(this.configData.layer.backgroundImage,'")')),this.configData.layer.width>0&&e.push("width: ".concat(this.configData.layer.width,"px")),this.configData.layer.height>0&&e.push("height: ".concat(this.configData.layer.height,"px"));var o=e.join(";");return o}}),data:function(){return{alert_two:!1,alert:!1,isname:!0,moveItem:{startX:0,startY:0},resizeItem:{startPx:0,startPy:0,x:0,y:0,w:0,h:0},frameSelectionDiv:{width:0,height:0,top:10,left:10,startX:0,startY:0,startPageX:0,startPageY:0},flag:"",curControl:null,curIndex:-1,selectedValue:100,index:"",dataLine:[],columns:[{}],componentdata:[],showname:[],projectname:"",page_size:10,current_page:1,totalnum:0,dargjsondata:"",componentadata:"",isid:!0}},watch:{topoData:function(t){}},methods:ft(ft(ft({},Object(N["c"])("topoEditor",["setSelectedComponent","addSelectedComponent","removeSelectedComponent","clearSelectedComponent","setLayerSelected","setCopySrcItems","increaseCopyCount","setdemo","execute","undo","redo","gettopoEditor","gettopoDataname"])),Object(N["b"])("topoEditor",["loadDefaultTopoData"])),{},{controlMousedown:function(t,e,o){if(this.index=o,!e.ctrlKey)for(var i in this.flag="move",this.curControl=t,this.clickItem(t,o),this.moveItem.startX=e.pageX,this.moveItem.startY=e.pageY,this.selectedComponentMap){t=this.selectedComponentMap[i];t.style.temp={},t.style.temp.position={},t.style.temp.position.x=t.style.position.x,t.style.temp.position.y=t.style.position.y}},resizeMousedown:function(t,e,o,i){this.flag=i,this.curControl=t,this.curIndex=o,this.clickItem(t,o);event.currentTarget;this.resizeItem.startPx=event.pageX,this.resizeItem.startPy=event.pageY,this.resizeItem.x=this.curControl.style.position.x,this.resizeItem.y=this.curControl.style.position.y,this.resizeItem.w=this.curControl.style.position.w,this.resizeItem.h=this.curControl.style.position.h},onLayerMousemove:function(t){if(1==t.which){if(""!=this.flag)if(this.flag.startsWith("resize")){var e=t.pageX-this.resizeItem.startPx,o=t.pageY-this.resizeItem.startPy;switch(this.flag){case"resize-lt":this.curControl.style.position.x=this.resizeItem.x+e,this.curControl.style.position.y=this.resizeItem.y+o,e=-e,o=-o;break;case"resize-lc":this.curControl.style.position.x=this.resizeItem.x+e,o=0,e=-e;break;case"resize-lb":this.curControl.style.position.x=this.resizeItem.x+e,e=-e;break;case"resize-rt":this.curControl.style.position.y=this.resizeItem.y+o,o=-o;break;case"resize-rc":o=0;break;case"resize-rb":break;case"resize-ct":this.curControl.style.position.y=this.resizeItem.y+o,e=0,o=-o;break;case"resize-cb":e=0;break}this.resizeItem.w+e>20&&(this.curControl.style.position.w=this.resizeItem.w+e),this.resizeItem.h+o>20&&(this.curControl.style.position.h=this.resizeItem.h+o),this.$nextTick((function(){var t=this.$refs["comp"+this.curIndex][0];t.onResize(),console.log("nextTick")}))}else if("move"==this.flag){e=t.pageX-this.moveItem.startX,o=t.pageY-this.moveItem.startY;for(var i in this.selectedComponentMap){var n=this.selectedComponentMap[i];n.style.position.x=n.style.temp.position.x+e,n.style.position.y=n.style.temp.position.y+o}}else"frame_selection"==this.flag&&this.onFrameSelection(t)}else this.flag=""},onLayerMouseup:function(t){if(this.flag.startsWith("resize")){var e=this.$refs["comp"+this.curIndex][0];e.onResize()}else if("frame_selection"==this.flag)this.onFrameSelection(t),this.frameSelectionDiv.width=0,this.frameSelectionDiv.height=0,this.frameSelectionDiv.top=0,this.frameSelectionDiv.left=0;else if("move"==this.flag){var o=t.pageX-this.moveItem.startX,i=t.pageY-this.moveItem.startY;for(var n in this.selectedComponentMap){var a=this.selectedComponentMap[n];a.style.position.x=a.style.position.x-o,a.style.position.y=a.style.position.y-i}this.execute({op:"move",dx:o,dy:i,items:this.selectedComponentMap})}this.flag=""},onLayerMousedown:function(t){console.log("onLayerMousedown"),this.flag="frame_selection",this.frameSelectionDiv.startX=event.offsetX,this.frameSelectionDiv.startY=event.offsetY,this.frameSelectionDiv.startPageX=event.pageX,this.frameSelectionDiv.startPageY=event.pageY},onLayerClick:function(){},onFrameSelection:function(t){var e=t.pageX-this.frameSelectionDiv.startPageX,o=t.pageY-this.frameSelectionDiv.startPageY;this.frameSelectionDiv.width=Math.abs(e),this.frameSelectionDiv.height=Math.abs(o),e>0&&o>0?(this.frameSelectionDiv.top=this.frameSelectionDiv.startY,this.frameSelectionDiv.left=this.frameSelectionDiv.startX):e>0&&o<0?(this.frameSelectionDiv.top=this.frameSelectionDiv.startY+o,this.frameSelectionDiv.left=this.frameSelectionDiv.startX):e<0&&o>0?(this.frameSelectionDiv.top=this.frameSelectionDiv.startY,this.frameSelectionDiv.left=this.frameSelectionDiv.startX+e):e<0&&o<0&&(this.frameSelectionDiv.top=this.frameSelectionDiv.startY+o,this.frameSelectionDiv.left=this.frameSelectionDiv.startX+e);var i=this,n={x:this.frameSelectionDiv.left,y:this.frameSelectionDiv.top,width:this.frameSelectionDiv.width,height:this.frameSelectionDiv.height},a=this.configData.components;a.forEach((function(t){var e={x:t.style.position.x,y:t.style.position.y,width:t.style.position.w,height:t.style.position.h};V(n,e)?i.addSelectedComponent(t):i.removeSelectedComponent(t)})),this.selectedComponents.length>0?this.setLayerSelected(!1):this.setLayerSelected(!0)},onDrop:function(t){t.preventDefault();var e=t.dataTransfer.getData("my-info"),o=JSON.parse(e);if(o.position={dataLine:this.dataLine},0!=this.checkAddComponent(o)){if("surface-edit-layer"==t.target.id)o.style.position.x=t.offsetX,o.style.position.y=t.offsetY;else{var i=t.currentTarget,n=i.getBoundingClientRect(),a=t.clientX-n.left,s=t.clientY-n.top;o.style.position.x=a,o.style.position.y=s}this.execute({op:"add",component:o}),this.clickItem(o,this.configData.components.length-1)}},moveItems:function(t){var e=0,o=0;"up"==t?o=-5:"right"==t?e=5:"down"==t?o=5:"left"==t&&(e=-5),this.execute({op:"move",dx:e,dy:o,items:this.selectedComponentMap})},checkAddComponent:function(t){return null!=t||(this.$q.notify({type:"negative",position:"bottom-right",message:"This component not surpport."}),!1)},parseView:function(t){return $["a"].parseViewName(t)},clickItem:function(t,e){this.setLayerSelected(!1),console.log(t),void 0==this.selectedComponentMap[t.identifier]&&(t.dataBind.biz=t.name,this.setSelectedComponent(t))},clickComponent:function(t,e,o){1==o.ctrlKey&&(e.dataBind.biz=3,console.log(e.dataBind.biz),console.log(e),this.setLayerSelected(!1),void 0==this.selectedComponentMap[e.identifier]?this.addSelectedComponent(e):this.removeSelectedComponent(e))},copyItem:function(){var t=[];for(var e in this.selectedComponentMap){var o=Object(E["a"])(this.selectedComponentMap[e]);t.push(o)}this.setCopySrcItems(t)},pasteItem:function(){this.copySrcItems&&this.copySrcItems.length>0&&this.execute({op:"copy-add",items:this.copySrcItems})},removeItem:function(t,e){this.execute({op:"del",index:t}),this.setLayerSelected(!0)},fullScreen:function(){localStorage.setItem("topoData",JSON.stringify(this.configData));var t=this.$router.resolve({path:"/fullscreen",name:"TopoFullscreen",query:{sceneId:this.sceneId,sceneName:this.sceneName},params:{sceneId:this.sceneId,sceneName:this.sceneName}}),e=t.href;window.open(e,"_blank")},printData:function(){var t=this.topoData;t.components=[],console.log(this.topoData),this.gettopoEditor(t)},showdialog:function(){this.alert_two=!0,this.dargjsondata=JSON.stringify(this.configData)},saveData:function(){this.alert_two=!1},getDataClick:function(){this.getData()},getData:function(t){var e=this,o=this;console.log(t),this.current_page=t||this.current_page,this.$axios.post("/api/drag/list",{username:localStorage.getItem("user_account"),page_size:this.page_size,current_page:this.current_page}).then((function(t){console.log(t.data.extra),o.componentdata=t.data.extra,e.totalnum=t.data.total})),this.alert=!0},pctclosedialog:function(){this.alert=!1},handleClick:function(t){console.log(t);var e=JSON.parse(t.dargjsondata);this.gettopoEditor(e),this.alert=!1},delClick:function(t){var e=this;console.log(t._id);var o=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){o.$axios.post("/api/drag/del",{id:t._id}).then((function(t){o.getData(),e.$message({type:"success",message:"删除成功!"})}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},currentchange:function(){},ToHome:function(){this.$router.push({path:"/Home"})},handleAvatarSuccess:function(t,e){this.imageUrl=URL.createObjectURL(e.raw)},usershownamelist:function(){var t=this;this.$axios.post("/api/drag/userlist",{user_account:localStorage.getItem("user_account")}).then((function(e){e.data.extra.map((function(e){var o={};o.value=e.user_account,o.label=e.user_account,t.showname.push(o)})),console.log(t.showname)}))},draglistid:function(){var t=this;this.$route.query.id&&(this.isid=!1,this.$axios.post("/api/drag/listid",{id:this.$route.query.id}).then((function(e){t.componentadata=e.data.extra[0];var o=JSON.parse(t.componentadata.dargjsondata);t.getfacility(o.name),console.log("data.name"+o.name),t.gettopoDataname(o.name),t.handleClick(e.data.extra[0])})))},getfacility:function(){}}),mounted:function(){this.usershownamelist(),this.draglistid(),this.isname=this.topoDatademo,this.loadDefaultTopoData()}},mt=ht,gt=(o("29ed"),Object(c["a"])(mt,O,k,!1,null,null,null)),yt=gt.exports,bt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"topo-properties"},[o("div",{staticClass:"topo-properties-nav"},[t.isLayer?[o("q-select",{attrs:{options:t.configObjectName,label:"项目"},on:{input:t.changetopoData},model:{value:t.topoDataname,callback:function(e){t.topoDataname=e},expression:"topoDataname"}})]:t._e()],2),null!=t.configObject&&0==t.isLayer?[o("div",{staticClass:"topo-properties-tabs"},[o("div",{staticClass:"topo-properties-tab",class:{"topo-properties-tab-active":0==t.tabIndex},on:{click:function(e){return t.changeTab(0)}}},[t._v("\n        样式\n      ")]),o("div",{staticClass:"topo-properties-tab",class:{"topo-properties-tab-active":1==t.tabIndex},on:{click:function(e){return t.changeTab(1)}}},[t._v("\n        数据\n      ")]),o("div",{staticClass:"topo-properties-tab",class:{"topo-properties-tab-active":2==t.tabIndex},on:{click:function(e){return t.changeTab(2)}}},[t._v("\n        行为\n      ")])]),o("div",{staticClass:"topo-properties-table"},[o("div",{directives:[{name:"show",rawName:"v-show",value:0==t.tabIndex,expression:"tabIndex == 0"}]},[t._m(0),o("q-list",{attrs:{separator:"","no-border":""}},[o("q-expansion-item",{attrs:{label:"定位","default-opened":""}},[o("table",[o("tr",[o("td",{attrs:{width:"50%"}},[t._v("X轴")]),o("td",{attrs:{width:"50%"}},[o("q-input",{staticStyle:{"padding-right":"5px"},attrs:{type:"number",suffix:"px"},model:{value:t.configObject.style.position.x,callback:function(e){t.$set(t.configObject.style.position,"x",e)},expression:"configObject.style.position.x"}})],1)]),o("tr",[o("td",[t._v("Y轴")]),o("td",[o("q-input",{staticStyle:{"padding-right":"5px"},attrs:{type:"number",suffix:"px"},model:{value:t.configObject.style.position.y,callback:function(e){t.$set(t.configObject.style.position,"y",e)},expression:"configObject.style.position.y"}})],1)]),o("tr",[o("td",[t._v("宽")]),o("td",[o("q-input",{staticStyle:{"padding-right":"5px"},attrs:{type:"number",suffix:"px"},model:{value:t.configObject.style.position.w,callback:function(e){t.$set(t.configObject.style.position,"w",e)},expression:"configObject.style.position.w"}})],1)]),o("tr",[o("td",[t._v("高")]),o("td",[o("q-input",{staticStyle:{"padding-right":"5px"},attrs:{type:"number",suffix:"px"},model:{value:t.configObject.style.position.h,callback:function(e){t.$set(t.configObject.style.position,"h",e)},expression:"configObject.style.position.h"}})],1)])])]),o("q-expansion-item",{attrs:{label:"边线","default-opened":""}},[o("table",[o("tr",[o("td",{attrs:{width:"50%"}},[t._v("边线宽")]),o("td",{attrs:{width:"50%"}},[o("q-input",{staticStyle:{"padding-right":"5px"},attrs:{type:"number",suffix:"px"},model:{value:t.configObject.style.borderWidth,callback:function(e){t.$set(t.configObject.style,"borderWidth",e)},expression:"configObject.style.borderWidth"}})],1)]),o("tr",[o("td",[t._v("边线样式")]),o("td",[o("q-select",{attrs:{options:t.borderStyleOptions},model:{value:t.configObject.style.borderStyle,callback:function(e){t.$set(t.configObject.style,"borderStyle",e)},expression:"configObject.style.borderStyle"}})],1)]),o("tr",[o("td",[t._v("边线颜色")]),o("td",[o("q-input",{staticClass:"my-input",attrs:{filled:""},scopedSlots:t._u([{key:"append",fn:function(){return[o("q-icon",{staticClass:"cursor-pointer",attrs:{name:"colorize"}},[o("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[o("q-color",{model:{value:t.configObject.style.borderColor,callback:function(e){t.$set(t.configObject.style,"borderColor",e)},expression:"configObject.style.borderColor"}})],1)],1)]},proxy:!0}],null,!1,643874885),model:{value:t.configObject.style.borderColor,callback:function(e){t.$set(t.configObject.style,"borderColor",e)},expression:"configObject.style.borderColor"}})],1)])])]),o("q-expansion-item",{attrs:{label:"基础","default-opened":""}},[o("table",[o("tr",[o("td",{attrs:{width:"50%"}},[t._v("可见")]),o("td",{attrs:{width:"50%"}},[o("q-select",{attrs:{options:[{label:"显示",value:!0},{label:"隐藏",value:!1}]},model:{value:t.configObject.style.visible,callback:function(e){t.$set(t.configObject.style,"visible",e)},expression:"configObject.style.visible"}})],1)]),o("tr",[o("td",[t._v("层级")]),o("td",[o("q-input",{attrs:{type:"number"},model:{value:t.configObject.style.zIndex,callback:function(e){t.$set(t.configObject.style,"zIndex",e)},expression:"configObject.style.zIndex"}})],1)]),o("tr",[o("td",[t._v("角度")]),o("td",[o("q-input",{staticStyle:{"padding-right":"5px"},attrs:{type:"number",suffix:"度"},model:{value:t.configObject.style.transform,callback:function(e){t.$set(t.configObject.style,"transform",e)},expression:"configObject.style.transform"}})],1)]),o("tr",[o("td",[t._v("元素背景色")]),o("td",[o("q-input",{staticClass:"my-input",attrs:{filled:""},scopedSlots:t._u([{key:"append",fn:function(){return[o("q-icon",{staticClass:"cursor-pointer",attrs:{name:"colorize"}},[o("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[o("q-color",{attrs:{"format-model":"rgba"},model:{value:t.configObject.style.backColor,callback:function(e){t.$set(t.configObject.style,"backColor",e)},expression:"configObject.style.backColor"}})],1)],1)]},proxy:!0}],null,!1,2766256543),model:{value:t.configObject.style.backColor,callback:function(e){t.$set(t.configObject.style,"backColor",e)},expression:"configObject.style.backColor"}})],1)]),void 0!=t.configObject.style.url&&null!=t.configObject.style.url?o("tr",[o("td",[t._v("元素连接地址")]),o("td",[o("q-input",{model:{value:t.configObject.style.url,callback:function(e){t.$set(t.configObject.style,"url",e)},expression:"configObject.style.url"}})],1)]):t._e(),void 0!=t.configObject.style.text?o("tr",[o("td",[t._v("文字")]),o("td",[o("q-input",{model:{value:t.configObject.style.text,callback:function(e){t.$set(t.configObject.style,"text",e)},expression:"configObject.style.text"}})],1)]):t._e(),void 0!=t.configObject.style.textAlign?o("tr",[o("td",[t._v("对齐")]),o("td",[o("q-select",{attrs:{options:t.textAlignOptions},model:{value:t.configObject.style.textAlign,callback:function(e){t.$set(t.configObject.style,"textAlign",e)},expression:"configObject.style.textAlign"}})],1)]):t._e(),o("tr",[o("td",[t._v("颜色")]),o("td",[o("q-input",{staticClass:"my-input",attrs:{filled:""},scopedSlots:t._u([{key:"append",fn:function(){return[o("q-icon",{staticClass:"cursor-pointer",attrs:{name:"colorize"}},[o("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[o("q-color",{attrs:{"format-model":"rgba"},model:{value:t.configObject.style.foreColor,callback:function(e){t.$set(t.configObject.style,"foreColor",e)},expression:"configObject.style.foreColor"}})],1)],1)]},proxy:!0}],null,!1,1050135626),model:{value:t.configObject.style.foreColor,callback:function(e){t.$set(t.configObject.style,"foreColor",e)},expression:"configObject.style.foreColor"}})],1)]),void 0!=t.configObject.style.fontFamily?o("tr",[o("td",[t._v("字体")]),o("td",[o("q-select",{attrs:{options:t.fontFamilyOptions},model:{value:t.configObject.style.fontFamily,callback:function(e){t.$set(t.configObject.style,"fontFamily",e)},expression:"configObject.style.fontFamily"}})],1)]):t._e(),void 0!=t.configObject.style.fontSize?o("tr",[o("td",[t._v("字体大小")]),o("td",[o("q-input",{staticStyle:{"padding-right":"5px"},attrs:{type:"number",suffix:"px"},model:{value:t.configObject.style.fontSize,callback:function(e){t.$set(t.configObject.style,"fontSize",e)},expression:"configObject.style.fontSize"}})],1)]):t._e(),void 0!=t.configObject.style.radius?o("tr",[o("td",[t._v("Radius")]),o("td",[o("q-input",{attrs:{type:"number"},model:{value:t.configObject.style.radius,callback:function(e){t.$set(t.configObject.style,"radius",e)},expression:"configObject.style.radius"}})],1)]):t._e(),void 0!=t.configObject.style.lineWidth?o("tr",[o("td",[t._v("LineWidth")]),o("td",[o("q-input",{staticStyle:{"padding-right":"5px"},attrs:{type:"number",suffix:"px"},model:{value:t.configObject.style.lineWidth,callback:function(e){t.$set(t.configObject.style,"lineWidth",e)},expression:"configObject.style.lineWidth"}})],1)]):t._e()])])],1)],1),o("div",{directives:[{name:"show",rawName:"v-show",value:1==t.tabIndex,expression:"tabIndex == 1"}]},[o("div",{staticClass:"not-surpport"},[o("h5",[t._v("传感器绑定")]),o("div",[t.factype?o("FacilityBind",{attrs:{factype:t.factype,"topo-dataname":t.topoDataname}}):t._e()],1)])]),o("div",{directives:[{name:"show",rawName:"v-show",value:2==t.tabIndex,expression:"tabIndex == 2"}]},[t.configObject&&t.configObject.action?[t._l(t.configObject.action,(function(e,i){return[o("div",{key:i,staticStyle:{"margin-top":"10px"}},[o("div",{staticStyle:{padding:"5px","border-left":"#ccc solid 1px","border-right":"#ccc solid 1px","border-top":"#ccc solid 1px"}},[t._v("\n                交互-"+t._s(i+1)+"\n                "),o("q-icon",{staticStyle:{float:"right",cursor:"pointer"},attrs:{name:"delete",color:"negative"},nativeOn:{click:function(e){return t.removeAction(i)}}})],1),o("table",[o("tr",[o("td",{attrs:{width:"50%"}},[t._v("事件")]),o("td",{attrs:{width:"50%"}},[o("q-select",{attrs:{"emit-value":"","map-options":"","option-label":"label","option-disable":function(t){return null===t||t.cannotSelect},options:[{label:"点击",value:"click"},{label:"双击",value:"dblclick"},{label:"鼠标移入",value:"mouseenter",cannotSelect:!0},{label:"鼠标双击",value:"mouseleave",cannotSelect:!0}]},model:{value:e.type,callback:function(o){t.$set(e,"type",o)},expression:"event.type"}})],1)]),o("tr",[o("td",[t._v("动作")]),o("td",[o("q-select",{attrs:{"emit-value":"","map-options":"","option-label":"label","option-disable":function(t){return null===t||t.cannotSelect},options:[{label:"打开链接",value:"link",cannotSelect:!0},{label:"赋值变量",value:"val",cannotSelect:!0},{label:"展示隐藏",value:"visible"},{label:"调用服务",value:"service",cannotSelect:!0}]},model:{value:e.action,callback:function(o){t.$set(e,"action",o)},expression:"event.action"}})],1)]),"visible"==e.action?o("tr",[o("td",[t._v("点击出现")]),o("td",[o("q-select",{attrs:{filled:"","emit-value":"",multiple:"","use-chips":"","map-options":"","option-label":"label",options:t.generateTargetComponentOptions()},model:{value:e.showItems,callback:function(o){t.$set(e,"showItems",o)},expression:"event.showItems"}})],1)]):t._e(),"visible"==e.action?o("tr",[o("td",[t._v("点击隐藏")]),o("td",[o("q-select",{attrs:{filled:"","emit-value":"",multiple:"","use-chips":"","map-options":"","option-label":"label",options:t.generateTargetComponentOptions()},model:{value:e.hideItems,callback:function(o){t.$set(e,"hideItems",o)},expression:"event.hideItems"}})],1)]):t._e()])])]})),o("div",{staticStyle:{width:"100%",padding:"10px 10px 10px 10px"}},[o("q-btn",{staticStyle:{width:"100%"},attrs:{label:"Add",outline:""},on:{click:t.addAction}})],1)]:t._e()],2)])]:t._e(),t.isLayer?[o("table",{staticStyle:{"margin-top":"10px"}},[o("tr",[o("td",{attrs:{width:"40%"}},[t._v("背景色")]),o("td",[o("q-input",{staticClass:"my-input",attrs:{filled:""},scopedSlots:t._u([{key:"append",fn:function(){return[o("q-icon",{staticClass:"cursor-pointer",attrs:{name:"colorize"}},[o("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[o("q-color",{model:{value:t.topoData.layer.backColor,callback:function(e){t.$set(t.topoData.layer,"backColor",e)},expression:"topoData.layer.backColor"}})],1)],1)]},proxy:!0}],null,!1,4097893181),model:{value:t.topoData.layer.backColor,callback:function(e){t.$set(t.topoData.layer,"backColor",e)},expression:"topoData.layer.backColor"}})],1)]),o("tr",[o("td",[t._v("背景图片")]),o("td",[o("q-input",{model:{value:t.topoData.layer.backgroundImage,callback:function(e){t.$set(t.topoData.layer,"backgroundImage",e)},expression:"topoData.layer.backgroundImage"}})],1)]),o("tr",[o("td",[t._v("分辨率")]),o("td",[o("q-select",{attrs:{options:t.whOptions},model:{value:t.layerWH,callback:function(e){t.layerWH=e},expression:"layerWH"}})],1)]),"custom"==t.layerWH?o("tr",[o("td",[t._v("宽（%）")]),o("td",[o("q-input",{model:{value:t.topoData.layer.width,callback:function(e){t.$set(t.topoData.layer,"width",e)},expression:"topoData.layer.width"}})],1)]):t._e(),"custom"==t.layerWH?o("tr",[o("td",[t._v("高（%）")]),o("td",[o("q-input",{model:{value:t.topoData.layer.height,callback:function(e){t.$set(t.topoData.layer,"height",e)},expression:"topoData.layer.height"}})],1)]):t._e()])]:t._e()],2)},vt=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("table",{staticStyle:{display:"none"}},[o("tr",[o("td",{staticStyle:{padding:"5px 0px","background-color":"#eee"},attrs:{width:"50%"}},[t._v("\n              属性\n            ")]),o("td",{staticStyle:{padding:"5px 0px","background-color":"#eee"},attrs:{width:"50%"}},[t._v("\n              值\n            ")])])])}],xt=o("a34a"),wt=o.n(xt),Ct=(o("96cf"),o("c973")),Ot=o.n(Ct),kt=(o("28a5"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-form",{attrs:{"label-width":"80px"}},[o("el-form-item",{attrs:{label:"设备组"}},[o("el-select",{attrs:{placeholder:"请选择设备组"},on:{change:t.devicechange},model:{value:t.sValue,callback:function(e){t.sValue=e},expression:"sValue"}},t._l(t.sOptions,(function(t){return o("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),o("el-form-item",{attrs:{label:"传感器ID"}},[o("el-select",{attrs:{placeholder:"请选择传感器ID"},on:{change:t.selectchange},model:{value:t.fValue,callback:function(e){t.fValue=e},expression:"fValue"}},t._l(t.fOptions,(function(t,e){return o("el-option",{key:e,attrs:{label:t.sensor_No,value:t._id}})})),1)],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("清空")])],1)],1)],1)}),jt=[];function _t(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,i)}return o}function Dt(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?_t(Object(o),!0).forEach((function(e){_()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):_t(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var St={props:["factype","topoDataname"],data:function(){return{sValue:"",fValue:"",sOptions:[],fOptions:[],faclicitydata:[],i:Number}},computed:Dt({},Object(N["d"])({topoData:function(t){return t.topoEditor.topoData}})),watch:{factype:function(){console.log(this.factype),this.factype.type,this.setValue(this.factype.dataBind.sn)},sValue:function(){var t=this;console.log(this.sValue),this.fOptions.length>0&&(this.fOptions.length=[]),this.faclicitydata.filter((function(e){e.sensor_facility===t.sValue&&t.fOptions.push(e)}))}},mounted:function(){var t=this;console.log("this.factype"+this.factype),this.$axios.post("api/sensor/list",{pct_name:this.topoDataname}).then((function(e){console.log(e.data.extra),t.faclicitydata=e.data.extra,t.sOptions=t.utildata(e.data.extra),t.setValue(t.factype.dataBind.sn)}))},methods:Dt(Dt({},Object(N["c"])("topoEditor",["gettopoEditor"])),{},{utildata:function(t){var e=[];return t.filter((function(t){e.indexOf(t.sensor_facility)<0&&e.push(t.sensor_facility)})),e},onSubmit:function(){this.fValue="",this.sValue="",this.factype.dataBind.sn="",this.gettopoEditor(this.topoData)},selectchange:function(){var t=this;console.log(this.faclicitydata),console.log(this.sValue),console.log(this.fValue),this.faclicitydata.filter((function(e){e.sensor_facility===t.sValue&&e._id===t.fValue&&(t.factype.dataBind.queryParam=e,console.log(e),console.log(t.fValue))})),console.log(this.factype),console.log(this.topoData),this.gettopoEditor(this.topoData)},devicechange:function(){var t=this;this.fOptions=[],this.faclicitydata.filter((function(e){e.sensor_facility===t.sValue&&t.fOptions.push(e)})),this.fValue=""},setValue:function(t){var e=this;t?this.faclicitydata.forEach((function(o){o._id==t&&(e.fValue=o.sensor_No,e.sValue=o.sensor_facility)})):(this.fValue="",this.sValue="")}})},It=St,zt=Object(c["a"])(It,kt,jt,!1,null,null,null),Lt=zt.exports;function Pt(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,i)}return o}function qt(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Pt(Object(o),!0).forEach((function(e){_()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):Pt(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var $t={name:"TopoProperties",components:{FacilityBind:Lt},data:function(){return{tabIndex:0,fontFamilyOptions:["Arial","Helvetica","sans-serif","宋体","黑体","微软雅黑"],textAlignOptions:["left","right","center","justify"],borderStyleOptions:["solid","dashed","dotted"],axiosUrlStyleOptions:["固定数据","服务器数据","http3"],whOptions:["1024x768","1366x768","1280x800","1440x900","1600x900","1920x1080","custom"],layerWHTemp:"",valOputions:"",position:{dataLine:[1130,50,100,500,600,300,100],xdata:[10,20,30,60,50,30]},topoDataname:"",configObjectName:[],factype:""}},computed:qt({layerWH:{get:function(){if(this.topoData.layer.width&&this.topoData.layer.height||(this.topoData.layer.width=1600,this.topoData.layer.height=900),""==this.layerWHTemp){var t=this.topoData.layer.width+"x"+this.topoData.layer.height;-1==this.whOptions.indexOf(t,0)?this.layerWHTemp="custom":this.layerWHTemp=t}else{t=this.topoData.layer.width+"x"+this.topoData.layer.height;-1==this.whOptions.indexOf(t,0)&&(this.layerWHTemp="custom")}return this.layerWHTemp},set:function(t){if(console.log(t),console.log(this),this.layerWHTemp=t,"custom"==t);else{var e=t.split("x");this.topoData.layer.width=parseInt(e[0]),this.topoData.layer.height=parseInt(e[1])}}}},Object(N["d"])({topoDatademo:function(t){return t.topoEditor.selectedComponentMapdemo},topoData:function(t){return t.topoEditor.topoData},selectedComponents:function(t){return t.topoEditor.selectedComponents},selectedComponentMap:function(t){return t.topoEditor.selectedComponentMap},isLayer:function(t){return t.topoEditor.selectedIsLayer},configObject:function(t){return t.topoEditor.selectedComponent},Projectnametlist:function(t){return t.example.Projectnametlist}})),watch:{topoData:function(){console.log(this.topoData),this.topoDataname=this.topoData.name},configObject:function(){this.configObject&&(console.log(this.configObject),this.factype=this.configObject)},Projectnametlist:function(){this.configObjectName=this.Projectnametlist}},methods:qt(qt(qt({},Object(N["c"])("topoEditor",["setdemo","setSelectedComponent","gettopoEditor"])),Object(N["c"])("example",["getProjectnametlist"])),{},{chengeval:function(t){var e=this;return Ot()(wt.a.mark((function o(){var i,n,a;return wt.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:for(i in e.valOputions=t,e.selectedComponentMap)n=e.selectedComponentMap[i];if(n.position.xdata=[],n.position.dataLine=[],"固定数据"!==e.valOputions){o.next=8;break}n.position=e.position,o.next=13;break;case 8:if("服务器数据"!==e.valOputions){o.next=13;break}return a={devunit_name:"donghai_6_2",var_name:"功率"},e,o.next=13,e.$axios.post("api/gateway/minute1/list",a).then((function(t){n.position.xdata=t.data.extra.timeList,n.position.dataLine=t.data.extra.dataList}));case 13:e.setSelectedComponent(n),e.setdemo(!1),e.$nextTick((function(){this.setdemo(!0)}));case 16:case"end":return o.stop()}}),o)})))()},initPage:function(t){this.configData=t},changeTab:function(t){this.tabIndex=t},bindData:function(t,e,o){console.log("bindData"),this.configObject=t,this.isLayer=o},generateTargetComponentOptions:function(){var t=this,e=[];return this.topoData.components.forEach((function(o){t.configObject.identifier!=o.identifier&&e.push({label:o.name||o.type,value:o.identifier})})),e},removeAction:function(t){this.configObject.action.splice(t,1)},addAction:function(){var t={type:"click",action:"visible",showItems:[],hideItems:[]};this.configObject.action.push(t)},changetopoData:function(){console.log(this.topoData),this.topoData.name=this.topoDataname,localStorage.setItem("topoData",JSON.stringify(this.topoData)),this.gettopoEditor(this.topoData)},list_pct_name:function(){var t=this;return Ot()(wt.a.mark((function e(){return wt.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.post("/api/admin/list",{user_account:localStorage.getItem("user_account")}).then((function(e){0==e.data.ret_code&&(t.topoDataname=t.topoData.name,t.configObjectName=e.data.extra[0].user_projects,t.getProjectnametlist(t.configObjectName))}));case 2:case"end":return e.stop()}}),e)})))()}}),mounted:function(){console.log(this.Projectnametlist),this.configObjectName=this.Projectnametlist,this.$route.query.id||(this.topoDataname="图层")}},Et=$t,Mt=(o("de83"),Object(c["a"])(Et,bt,vt,!1,null,null,null)),Bt=Mt.exports,Tt={name:"TopoEditor",components:{WresizePanel3:d,TopoToolbox:C,TopoMain:yt,TopoProperties:Bt},data:function(){return{}},methods:{}},Wt=Tt,Ft=(o("d449"),Object(c["a"])(Wt,i,n,!1,null,null,null));e["default"]=Ft.exports}}]);