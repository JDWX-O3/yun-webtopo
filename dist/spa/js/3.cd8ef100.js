(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"0589":function(t,e,i){"use strict";var o=i("6f31"),n=i.n(o);n.a},1628:function(t){t.exports=JSON.parse('{"title":"图表","icon":"insert_chart","opened":false,"items":[{"text":"line","icon":"show_chart","isFontIcon":true,"info":{"type":"chart-line","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":200,"h":200},"backColor":"white","zIndex":1}}},{"text":"step line","icon":"show_chart","isFontIcon":true,"info":{"type":"chart-line-step","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":200,"h":200},"backColor":"white","zIndex":1}}},{"text":"bar","icon":"bar_chart","isFontIcon":true,"info":{"type":"chart-bar","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":200,"h":200},"backColor":"white","zIndex":1}}},{"text":"pie","icon":"pie_chart","isFontIcon":true,"info":{"type":"chart-pie","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":300,"h":300},"backColor":"white","zIndex":1}}},{"text":"gauge","icon":"av_timer","isFontIcon":true,"info":{"type":"chart-gauge","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":300,"h":300},"backColor":"white","zIndex":1}}},{"text":"lines","icon":"av_timer","isFontIcon":true,"info":{"type":"chart-lines","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":300,"h":300},"backColor":" ","zIndex":1}}},{"text":"watera","icon":"av_timer","isFontIcon":true,"info":{"type":"chart-watera","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":300,"h":300},"backColor":" ","zIndex":1}}}]}')},2713:function(t,e,i){},"29ed":function(t,e,i){"use strict";var o=i("9279"),n=i.n(o);n.a},"542a":function(t,e,i){},"59b2":function(t,e,i){},"60ab":function(t,e,i){"use strict";var o=i("542a"),n=i.n(o);n.a},"6f31":function(t,e,i){},"8de3":function(t){t.exports=JSON.parse('{"title":"基本","icon":"payment","opened":false,"items":[{"text":"Text","icon":"text_fields","isFontIcon":true,"info":{"type":"text","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":100,"h":30},"backColor":"transparent","foreColor":"#000000","zIndex":1,"transform":0,"text":"Test","textAlign":"center","fontSize":14,"fontFamily":"Arial"}}},{"text":"Image","icon":"photo_size_select_actual","isFontIcon":true,"info":{"type":"image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":200,"h":200},"backColor":"transparent","zIndex":1,"transform":0,"url":""}}},{"text":"Triangle","icon":"change_history","isFontIcon":true,"info":{"type":"triangle","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":200,"h":200},"backColor":"transparent","foreColor":"grey","zIndex":1,"transform":0}}},{"text":"Rect","icon":"stop","isFontIcon":true,"info":{"type":"rect","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":100,"h":200},"backColor":"transparent","foreColor":"grey","zIndex":1,"transform":0,"radius":0}}},{"text":"Circular","icon":"fiber_manual_record","isFontIcon":true,"info":{"type":"circular","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":200,"h":200},"backColor":"transparent","foreColor":"grey","zIndex":1,"transform":0}}},{"text":"Line","icon":"remove","isFontIcon":true,"info":{"type":"line","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":100,"y":100,"w":300,"h":30},"backColor":"transparent","foreColor":"grey","zIndex":1,"transform":0,"lineWidth":2}}},{"text":"Line-Arrow","icon":"arrow_forward","isFontIcon":true,"info":{"type":"line-arrow","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":100,"y":100,"w":300,"h":80},"backColor":"transparent","foreColor":"grey","zIndex":1,"transform":0,"lineWidth":2,"points":[{"x":0,"y":0},{"x":0,"y":80},{"x":150,"y":80},{"x":150,"y":40},{"x":300,"y":40}]}}},{"text":"贝塞尔曲线","icon":"arrow_forward","isFontIcon":true,"info":{"type":"bizier-curve-arrow","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":100,"y":100,"w":300,"h":80},"backColor":"transparent","foreColor":"grey","zIndex":1,"transform":0,"lineWidth":2,"points":[{"x":20,"y":20},{"x":20,"y":100},{"x":200,"y":100},{"x":200,"y":20}]}}}]}')},9022:function(t,e,i){"use strict";var o=i("2713"),n=i.n(o);n.a},9153:function(t){t.exports=JSON.parse("{}")},9279:function(t,e,i){},"982c":function(t){t.exports=JSON.parse('{"title":"SVG控件","icon":"payment","opened":false,"items":[{"text":"开关","icon":"statics/topo/svg/switch1.png","info":{"type":"buttom","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{"isclick":true}},"style":{"position":{"x":0,"y":0,"w":100,"h":100},"backColor":"transparent","zIndex":1,"url":"statics/topo/svg/on1.svg"}}},{"text":"矩形","icon":"stop","isFontIcon":true,"info":{"type":"svg-image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":100,"h":100},"backColor":"transparent","zIndex":1,"url":"statics/topo/svg/ellipse2.svg"}}},{"text":"动画演示1","icon":"stop","isFontIcon":true,"info":{"type":"svg-image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":200,"h":200},"backColor":"transparent","zIndex":1,"url":"statics/topo/svg/demo1.svg"}}},{"text":"on","icon":"stop","isFontIcon":true,"info":{"type":"svg-image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":200,"h":200},"backColor":"transparent","zIndex":1,"url":"statics/topo/svg/on1.svg"}}},{"text":"off","icon":"statics/topo/office/g03.svg","isFontIcon":true,"info":{"type":"image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":40,"h":40},"backColor":"transparent","zIndex":1,"url":"statics/topo/svg/off1.svg"}}},{"text":"载入框1","icon":"stop","isFontIcon":true,"info":{"type":"svg-static","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":200,"h":200},"backColor":"transparent","zIndex":1,"url":"statics/topo/svg/loading/loading-1.svg"}}},{"text":"载入框2","icon":"stop","isFontIcon":true,"info":{"type":"svg-static","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":200,"h":200},"backColor":"transparent","zIndex":1,"url":"statics/topo/svg/loading/loading-2.svg"}}},{"text":"载入框3","icon":"stop","isFontIcon":true,"info":{"type":"svg-static","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":200,"h":200},"backColor":"transparent","zIndex":1,"url":"statics/topo/svg/loading/loading-3.svg"}}},{"text":"载入框4","icon":"stop","isFontIcon":true,"info":{"type":"svg-static","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":200,"h":200},"backColor":"transparent","zIndex":1,"url":"statics/topo/svg/loading/loading-4.svg"}}},{"text":"载入框5","icon":"stop","isFontIcon":true,"info":{"type":"svg-static","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":200,"h":200},"backColor":"transparent","zIndex":1,"url":"statics/topo/svg/loading/loading-5.svg"}}},{"text":"载入框6","icon":"stop","isFontIcon":true,"info":{"type":"svg-static","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":200,"h":200},"backColor":"transparent","zIndex":1,"url":"statics/topo/svg/loading/loading-6.svg"}}},{"text":"载入框7","icon":"stop","isFontIcon":true,"info":{"type":"svg-static","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":200,"h":200},"backColor":"transparent","zIndex":1,"url":"statics/topo/svg/loading/loading-7.svg"}}},{"text":"载入框8","icon":"stop","isFontIcon":true,"info":{"type":"svg-static","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":200,"h":200},"backColor":"transparent","zIndex":1,"url":"statics/topo/svg/loading/loading-8.svg"}}}]}')},c294:function(t){t.exports=JSON.parse('{"title":"图片","icon":"home","opened":false,"items":[{"text":"","icon":"statics/topo/office/index (9).svg","info":{"type":"image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":42,"h":42},"backColor":"transparent","zIndex":1,"url":"statics/topo/office/index (9).svg"}}},{"text":"","icon":"statics/topo/office/g73.svg","info":{"type":"image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":42,"h":42},"backColor":"transparent","zIndex":1,"url":"statics/topo/office/g73.svg"}}},{"text":"","icon":"statics/topo/office/g01.svg","info":{"type":"image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":42,"h":42},"backColor":"transparent","zIndex":1,"url":"statics/topo/office/g01.svg"}}},{"text":"","icon":"statics/topo/office/g02.svg","info":{"type":"image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":42,"h":42},"backColor":"transparent","zIndex":1,"url":"statics/topo/office/g02.svg"}}},{"text":"","icon":"statics/topo/office/g03.svg","info":{"type":"image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":42,"h":42},"backColor":"transparent","zIndex":1,"url":"statics/topo/office/g03.svg"}}},{"text":"","icon":"statics/topo/office/20190701182101_368.png","info":{"type":"image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":142,"h":212},"backColor":"transparent","zIndex":1,"url":"statics/topo/office/20190701182101_368.png"}}},{"text":"","icon":"statics/topo/office/20190702170803_715.png","info":{"type":"image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":142,"h":212},"backColor":"transparent","zIndex":1,"url":"statics/topo/office/20190702170803_715.png"}}},{"text":"","icon":"statics/topo/office/20190701181428_161.png","info":{"type":"image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":142,"h":212},"backColor":"transparent","zIndex":1,"url":"statics/topo/office/20190701181428_161.png"}}},{"text":"","icon":"statics/topo/office/20190701181354_914.png","info":{"type":"image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":142,"h":212},"backColor":"transparent","zIndex":1,"url":"statics/topo/office/20190701181354_914.png"}}},{"text":"","icon":"statics/topo/office/GD.svg","info":{"type":"image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":142,"h":212},"backColor":"transparent","zIndex":1,"url":"statics/topo/office/GD.svg"}}},{"text":"","icon":"statics/topo/office/20190701181434_604.png","info":{"type":"image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":142,"h":112},"backColor":"transparent","zIndex":1,"url":"statics/topo/office/20190701181434_604.png"}}},{"text":"","icon":"statics/topo/office/20190701182105_431.png","info":{"type":"image","action":[],"dataBind":{"sn":"","title":"","biz":"","queryParam":{}},"style":{"position":{"x":0,"y":0,"w":142,"h":112},"backColor":"transparent","zIndex":1,"url":"statics/topo/office/20190701182105_431.png"}}}]}')},d449:function(t,e,i){"use strict";var o=i("ec2f"),n=i.n(o);n.a},de83:function(t,e,i){"use strict";var o=i("59b2"),n=i.n(o);n.a},ec2f:function(t,e,i){},f8cc:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"topo-editor"},[i("WresizePanel3",{staticClass:"full-height",scopedSlots:t._u([{key:"left",fn:function(){return[i("TopoToolbox",{ref:"topoToolbox",staticClass:"topo-toolbox"})]},proxy:!0},{key:"center",fn:function(){return[i("TopoMain",{ref:"topoMain",staticClass:"topo-main"})]},proxy:!0},{key:"right",fn:function(){return[i("TopoProperties",{ref:"topoProperties",staticClass:"topo-properties"})]},proxy:!0}])})],1)},n=[],a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wresize-panel-3",on:{mouseup:function(e){return t.onMouseup(e)},mousemove:function(e){return t.onMousemove(e)}}},[i("div",{staticClass:"wresize-panel-left",style:{width:t.divLeft.width+"px"}},[t._t("left")],2),i("div",{staticClass:"wresize-handler-left",style:{left:t.divLeftHandler.left+"px"},on:{mousedown:function(e){return t.onMouseDownLeft(e)}}}),i("div",{staticClass:"wresize-panel-center",style:{left:t.divCenter.left+"px",right:t.divCenter.right+"px"}},[t._t("center")],2),i("div",{staticClass:"wresize-handler-right",style:{right:t.divRightHandler.right+"px"},on:{mousedown:function(e){return t.onMouseDownRight(e)}}}),i("div",{staticClass:"wresize-panel-right",style:{width:t.divRight.width+"px"}},[t._t("right")],2)])},s=[],r=(i("c5f6"),{name:"wresize-panel-3",props:{leftWidth:{type:Number,default:235},rightWidth:{type:Number,default:265},onResize:{type:Function,default:void 0}},data:function(){return{flag:"",disx:0,divLeft:{width:this.leftWidth,temp:0},divCenter:{left:this.leftWidth+5,right:this.rightWidth+5,temp:0},divRight:{width:this.rightWidth,temp:0},divLeftHandler:{left:this.leftWidth,temp:0},divRightHandler:{right:this.rightWidth,temp:0}}},methods:{onMouseDownLeft:function(t){this.flag="left";t.currentTarget;this.disx=t.pageX,this.divLeftHandler.temp=this.divLeftHandler.left,this.divLeft.temp=this.divLeft.width,this.divCenter.temp=this.divCenter.left},onMouseDownRight:function(t){this.flag="right";t.currentTarget;this.disx=t.pageX,this.divRightHandler.temp=this.divRightHandler.right,this.divRight.temp=this.divRight.width,this.divCenter.temp=this.divCenter.right},onMouseup:function(t){""!=this.flag&&(this.onResize&&this.onResize(this.flag),this.flag="")},onMousemove:function(t){if(1==t.which){if(this.flag){var e=t.pageX-this.disx;"left"==this.flag?(this.divLeftHandler.left=this.divLeftHandler.temp+e,this.divLeft.width=this.divLeft.temp+e,this.divCenter.left=this.divCenter.temp+e):"right"==this.flag&&(this.divRightHandler.right=this.divRightHandler.temp-e,this.divRight.width=this.divRight.temp-e,this.divCenter.right=this.divCenter.temp-e)}}else""!=this.flag&&(this.flag="")}}}),l=r,c=(i("0589"),i("2877")),p=Object(c["a"])(l,a,s,!1,null,null,null),d=p.exports,u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"topo-toolbox"},[i("q-list",{staticClass:"full-height",attrs:{highlight:"",separator:""}},[t._l(t.toolbox,(function(e,o){return[i("q-expansion-item",{key:o,attrs:{icon:e.icon,label:e.title}},[i("div",{staticClass:"toolbox-group"},[t._l(e.items,(function(e,o){return[i("div",{key:o,staticClass:"toolbox-item",attrs:{draggable:"true"},on:{dragstart:function(i){return t.onDragstart(i,e)}}},[!0===e.isFontIcon?[i("div",{staticClass:"toolbox-item-icon"},[i("q-icon",{attrs:{name:e.icon,size:"30px"}})],1),i("div",{staticClass:"toolbox-item-text"},[t._v(t._s(e.text))])]:[i("div",{staticClass:"toolbox-item-icon"},[i("img",{staticClass:"topo-dom",staticStyle:{width:"40px",height:"40px"},attrs:{src:e.icon}})]),i("div",{staticClass:"toolbox-item-text"},[t._v(t._s(e.text))])]],2)]}))],2)])]}))],2)],1)},f=[],h=i("8de3"),m=i("1628"),g=i("c294"),y=i("982c"),v=(i("9153"),{name:"TopoToolbox",data:function(){return{toolbox:[],selectedIndex:-1}},methods:{onDragstart:function(t,e){console.log("onDragstart"),console.log(e);var i=JSON.stringify(e.info);t.dataTransfer.setData("my-info",i)}},mounted:function(){this.toolbox=[],this.toolbox.push(h),this.toolbox.push(m),this.toolbox.push(g),this.toolbox.push(y)}}),b=v,x=(i("9022"),Object(c["a"])(b,u,f,!1,null,null,null)),w=x.exports,C=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"topo-main q-pa-md q-gutter-sm"},[i("vue-ruler-tool",{staticStyle:{width:"100%",height:"calc(100% - 40px)"},attrs:{parent:!0,"is-scale-revise":!0}},[i("div",{staticClass:"topo-layer",class:{"topo-layer-view-selected":t.selectedIsLayer},style:t.layerStyle,attrs:{tabindex:"0",id:"surface-edit-layer"},on:{click:function(e){return t.onLayerClick(e)},mouseup:function(e){return t.onLayerMouseup(e)},mousemove:function(e){return t.onLayerMousemove(e)},mousedown:function(e){return t.onLayerMousedown(e)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:t.removeItem()},dragover:function(t){t.preventDefault()},drop:t.onDrop,keydown:[function(e){return(e.type.indexOf("key")||67===e.keyCode)&&e.ctrlKey?(e.stopPropagation(),t.copyItem(e)):null},function(e){return(e.type.indexOf("key")||86===e.keyCode)&&e.ctrlKey?(e.stopPropagation(),t.pasteItem(e)):null},function(e){return(e.type.indexOf("key")||90===e.keyCode)&&e.ctrlKey?(e.stopPropagation(),t.undo(e)):null},function(e){return(e.type.indexOf("key")||89===e.keyCode)&&e.ctrlKey?(e.stopPropagation(),t.redo(e)):null}]}},[t._l(t.configData.components,(function(e,o){return[i("div",{key:e.identifier,staticClass:"topo-layer-view",class:{"topo-layer-view-selected":void 0!=t.selectedComponentMap[e.identifier]},style:{left:e.style.position.x+"px",top:e.style.position.y+"px",width:e.style.position.w+"px",height:e.style.position.h+"px","background-color":e.style.backColor,zIndex:e.style.zIndex,borderWidth:e.style.borderWidth+"px",borderStyle:e.style.borderStyle,borderColor:e.style.borderColor,transform:e.style.transform?"rotate("+e.style.transform+"deg)":"rotate(0deg)"},attrs:{tabindex:"0"},on:{click:function(i){return i.stopPropagation(),t.clickComponent(o,e,i)},mousedown:function(i){return i.stopPropagation(),t.controlMousedown(e,i,o)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:t.removeItem()},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.moveItems("up"))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])||"button"in e&&2!==e.button||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.moveItems("right"))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.moveItems("down"))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.moveItems("left"))},function(e){return(e.type.indexOf("key")||67===e.keyCode)&&e.ctrlKey?(e.stopPropagation(),t.copyItem(e)):null},function(e){return(e.type.indexOf("key")||86===e.keyCode)&&e.ctrlKey?(e.stopPropagation(),t.pasteItem(e)):null},function(e){return(e.type.indexOf("key")||90===e.keyCode)&&e.ctrlKey?(e.stopPropagation(),t.undo(e)):null},function(e){return(e.type.indexOf("key")||89===e.keyCode)&&e.ctrlKey?(e.stopPropagation(),t.redo(e)):null}]}},[t.topoDatademo?i(t.parseView(e),{ref:"comp"+o,refInFor:!0,tag:"component",attrs:{detail:e,editMode:!0,selected:!!t.selectedComponentMap[e.identifier]}}):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:t.selectedComponentMap[e.identifier],expression:"selectedComponentMap[component.identifier]"}],staticClass:"resize-left-top",on:{mousedown:function(i){return i.stopPropagation(),t.resizeMousedown(e,i,o,"resize-lt")}}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.selectedComponentMap[e.identifier],expression:"selectedComponentMap[component.identifier]"}],staticClass:"resize-left-center",on:{mousedown:function(i){return i.stopPropagation(),t.resizeMousedown(e,i,o,"resize-lc")}}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.selectedComponentMap[e.identifier],expression:"selectedComponentMap[component.identifier]"}],staticClass:"resize-left-bottom",on:{mousedown:function(i){return i.stopPropagation(),t.resizeMousedown(e,i,o,"resize-lb")}}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.selectedComponentMap[e.identifier],expression:"selectedComponentMap[component.identifier]"}],staticClass:"resize-right-top",on:{mousedown:function(i){return i.stopPropagation(),t.resizeMousedown(e,i,o,"resize-rt")}}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.selectedComponentMap[e.identifier],expression:"selectedComponentMap[component.identifier]"}],staticClass:"resize-right-center",on:{mousedown:function(i){return i.stopPropagation(),t.resizeMousedown(e,i,o,"resize-rc")}}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.selectedComponentMap[e.identifier],expression:"selectedComponentMap[component.identifier]"}],staticClass:"resize-right-bottom",on:{mousedown:function(i){return i.stopPropagation(),t.resizeMousedown(e,i,o,"resize-rb")}}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.selectedComponentMap[e.identifier],expression:"selectedComponentMap[component.identifier]"}],staticClass:"resize-center-top",on:{mousedown:function(i){return i.stopPropagation(),t.resizeMousedown(e,i,o,"resize-ct")}}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.selectedComponentMap[e.identifier],expression:"selectedComponentMap[component.identifier]"}],staticClass:"resize-center-bottom",on:{mousedown:function(i){return i.stopPropagation(),t.resizeMousedown(e,i,o,"resize-cb")}}})],1)]})),i("div",{staticClass:"topo-frame-selection",style:{width:t.frameSelectionDiv.width+"px",height:t.frameSelectionDiv.height+"px",top:t.frameSelectionDiv.top+"px",left:t.frameSelectionDiv.left+"px"}})],2)]),i("div",{staticStyle:{height:"40px","border-top":"#ccc solid 1px",position:"relative","background-color":"white"}},[i("div",{staticClass:"row",staticStyle:{position:"absolute",left:"0px",top:"0px"}},[i("div",{staticStyle:{"line-height":"40px",height:"40px"}},[t._v("已选组件个数："+t._s(t.selectedComponents.length))]),i("q-btn",{staticStyle:{"margin-left":"100px",height:"30px","margin-top":"5px"},attrs:{label:"预览",color:"primary",size:"xs"},on:{click:t.fullScreen}}),i("q-btn",{staticStyle:{"margin-left":"100px",height:"30px","margin-top":"5px"},attrs:{label:"清空",color:"primary",size:"xs"},on:{click:t.printData}}),i("q-btn",{staticStyle:{"margin-left":"100px",height:"30px","margin-top":"5px"},attrs:{label:"保存数据",color:"primary",size:"xs"},on:{click:t.showdialog}}),i("q-btn",{staticStyle:{"margin-left":"100px",height:"30px","margin-top":"5px"},attrs:{label:"获取之前数据",color:"primary",size:"xs"},on:{click:t.getDataClick}})],1),i("div",{staticClass:"row",staticStyle:{position:"absolute",right:"10px",top:"0px"}},[i("div",{staticStyle:{"line-height":"40px",height:"40px",padding:"0px 5px"}},[t._v("缩放")]),i("q-slider",{staticStyle:{width:"200px"},attrs:{min:30,max:200,step:1,label:"","label-value":t.selectedValue+"%",snap:""},model:{value:t.selectedValue,callback:function(e){t.selectedValue=e},expression:"selectedValue"}})],1)]),i("el-dialog",{attrs:{title:"添加项目",visible:t.alert_two,width:"30%"},on:{"update:visible":function(e){t.alert_two=e}}},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:12,offset:6}},[i("el-form",{attrs:{"label-width":"100px"}},[i("el-form-item",{attrs:{label:"展示用户名"}},[i("el-input",{attrs:{placeholder:t.shownamev},model:{value:t.showname,callback:function(e){t.showname=e},expression:"showname"}})],1),i("el-form-item",{attrs:{label:"项目名称"}},[i("el-input",{attrs:{placeholder:"请输入项目名称"},on:{change:t.changetopoDataname},model:{value:t.projectname,callback:function(e){t.projectname=e},expression:"projectname"}})],1)],1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.alert_two=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.saveData}},[t._v("确 定")])],1)],1),i("el-dialog",{staticClass:"dialogcss",attrs:{title:"项目展示",visible:t.alert,width:"50%"},on:{"update:visible":function(e){t.alert=e}}},[[i("Topotable",{attrs:{componentdata:t.componentdata,totalnum:t.totalnum},on:{delClick:t.delClick,getData:t.getData,handleClick:t.handleClick}})]],2)],1)},k=[],D=(i("8e6e"),i("8a81"),i("ac6a"),i("cadf"),i("06db"),i("456d"),i("7f7f"),i("f559"),i("9523")),I=i.n(D),S=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.rulerToggle,expression:"rulerToggle"}],staticClass:"ScaleBox",style:{width:t.windowWidth+"px",height:t.windowHeight+"px",position:t.position},attrs:{id:"rulerTool",onselectstart:"return false;"}},[i("div",{staticClass:"ScaleRuler_h",attrs:{id:"levelRuler"},on:{mousedown:function(e){return e.stopPropagation(),t.levelDragRuler(e)}}},t._l(t.xScale,(function(e,o){return i("span",{key:o,staticClass:"n",style:{left:50*o+2+"px"}},[t._v(t._s(e.id))])})),0),i("div",{staticClass:"ScaleRuler_v",attrs:{id:"verticalRuler"},on:{mousedown:function(e){return e.stopPropagation(),t.verticalDragRuler(e)}}},t._l(t.yScale,(function(e,o){return i("span",{key:o,staticClass:"n",style:{top:50*o+2+"px"}},[t._v(t._s(e.id))])})),0),i("div",{staticClass:"RefDot_h",style:{top:t.verticalDottedTop+"px"},attrs:{id:"levelDottedLine"}}),i("div",{staticClass:"RefDot_v",style:{left:t.levelDottedLeft+"px"},attrs:{id:"verticalDottedLine"}}),t._l(t.levelLineList,(function(e){return i("div",{key:e.id,staticClass:"RefLine_h",style:{top:e.top+"px"},attrs:{id:e.id,title:e.title},on:{mousedown:function(i){return t.dragLevelLine(e.id)}}})})),t._l(t.verticalLineList,(function(e){return i("div",{key:e.id,staticClass:"RefLine_v",style:{left:e.left+"px"},attrs:{id:e.id,title:e.title},on:{mousedown:function(i){return t.dragVerticalLine(e.id)}}})})),i("div",{staticStyle:{padding:"18px"},style:{left:t.contentLayout.left+"px",top:t.contentLayout.top+"px"},attrs:{id:"content"}},[t._t("default")],2)],2)},O=[],z={name:"VueRulerTool",components:{},props:{position:{type:String,default:"relative",validator:function(t){return-1!==["absolute","fixed","relative","static","inherit"].indexOf(t)}},isHotKey:{type:Boolean,default:!0},isScaleRevise:{type:Boolean,default:!1},presetLine:{type:Array,default:function(){return[]}},contentLayout:{type:Object,default:function(){return{top:0,left:0}}},parent:{type:Boolean,default:!1}},data:function(){return{windowWidth:0,windowHeight:0,xScale:[],yScale:[],topSpacing:0,leftSpacing:0,isDrag:!1,dragFlag:"",levelLineList:[],verticalLineList:[],levelDottedLeft:-999,verticalDottedTop:-999,rulerWidth:0,rulerHeight:0,dragLineId:"",keyCode:{r:82},rulerToggle:!0}},watch:{},mounted:function(){document.documentElement.addEventListener("mousemove",this.dottedLineMove,!0),document.documentElement.addEventListener("mouseup",this.dottedLineUp,!0),document.documentElement.addEventListener("keyup",this.keyboard,!0),this.init(),this.quickGeneration(this.presetLine);var t=this;window.onresize=function(){t.xScale=[],t.yScale=[],t.init()}},beforeDestroy:function(){document.documentElement.removeEventListener("mousemove",this.dottedLineMove,!0),document.documentElement.removeEventListener("mouseup",this.dottedLineUp,!0),document.documentElement.removeEventListener("keyup",this.keyboard,!0)},methods:{init:function(){this.box(),this.scaleCalc()},box:function(){if(this.isScaleRevise){for(var t=document.getElementById("content"),e=t.offsetLeft,i=t.offsetTop,o=0;o<e;o+=1)o%50===0&&o+50<=e&&this.xScale.push({id:o});for(var n=0;n<i;n+=1)n%50===0&&n+50<=i&&this.yScale.push({id:n})}if(this.parent){var a=window.getComputedStyle(this.$el.parentNode,null);this.windowWidth=parseInt(a.getPropertyValue("width"),10),this.windowHeight=parseInt(a.getPropertyValue("height"),10)}else this.windowWidth=document.documentElement.clientWidth-this.leftSpacing,this.windowHeight=document.documentElement.clientHeight-this.topSpacing;this.rulerWidth=document.getElementById("verticalRuler").clientWidth,this.rulerHeight=document.getElementById("levelRuler").clientHeight,this.topSpacing=document.getElementById("levelRuler").getBoundingClientRect().y,this.leftSpacing=document.getElementById("verticalRuler").getBoundingClientRect().x},scaleCalc:function(){for(var t=0;t<this.windowWidth;t+=1)t%50===0&&this.xScale.push({id:t});for(var e=0;e<this.windowHeight;e+=1)e%50===0&&this.yScale.push({id:e})},newLevelLine:function(){this.isDrag=!0,this.dragFlag="x"},newVerticalLine:function(){this.isDrag=!0,this.dragFlag="y"},dottedLineMove:function(t){switch(this.dragFlag){case"x":this.isDrag&&(this.verticalDottedTop=t.pageY-this.topSpacing);break;case"y":this.isDrag&&(this.levelDottedLeft=t.pageX-this.leftSpacing);break;case"l":this.isDrag&&(this.verticalDottedTop=t.pageY-this.topSpacing);break;case"v":this.isDrag&&(this.levelDottedLeft=t.pageX-this.leftSpacing);break;default:break}},dottedLineUp:function(t){var e=this;if(this.isDrag){switch(this.isDrag=!1,this.dragFlag){case"x":this.levelLineList.push({id:"levelLine"+this.levelLineList.length+1,title:t.pageY+1-this.topSpacing-18+"px",top:t.pageY-this.topSpacing+1});break;case"y":this.verticalLineList.push({id:"verticalLine"+this.verticalLineList.length+1,title:t.pageX+1-this.leftSpacing-18+"px",left:t.pageX-this.leftSpacing+1});break;case"l":var i,o,n,a;if(t.pageY-this.topSpacing<this.rulerHeight)this.levelLineList.forEach((function(t,n){t.id===e.dragLineId&&(i=n,o=t.id)})),this.levelLineList.splice(i,1,{id:o,title:"-600px",top:-600});else this.levelLineList.forEach((function(t,i){t.id===e.dragLineId&&(n=i,a=t.id)})),this.levelLineList.splice(n,1,{id:a,title:t.pageY+1-this.topSpacing-18+"px",top:t.pageY-this.topSpacing+1});break;case"v":var s,r,l,c;if(t.pageX-this.leftSpacing<this.rulerWidth)this.verticalLineList.forEach((function(t,i){t.id===e.dragLineId&&(s=i,r=t.id)})),this.verticalLineList.splice(s,1,{id:r,title:"-600px",left:-600});else this.verticalLineList.forEach((function(t,i){t.id===e.dragLineId&&(l=i,c=t.id)})),this.verticalLineList.splice(l,1,{id:c,title:t.pageX+2-this.leftSpacing-18+"px",left:t.pageX-this.leftSpacing+1});break;default:break}this.verticalDottedTop=this.levelDottedLeft=-10}},levelDragRuler:function(){this.newLevelLine()},verticalDragRuler:function(){this.newVerticalLine()},dragLevelLine:function(t){this.isDrag=!0,this.dragFlag="l",this.dragLineId=t},dragVerticalLine:function(t){this.isDrag=!0,this.dragFlag="v",this.dragLineId=t},keyboard:function(t){if(this.isHotKey)switch(t.keyCode){case this.keyCode.r:this.rulerToggle=!this.rulerToggle;break}},quickGeneration:function(t){var e=this;t!==[]&&t.forEach((function(t){switch(t.type){case"l":e.levelLineList.push({id:"levelLine"+e.levelLineList.length+1,title:t.site+"px",top:t.site});break;case"v":e.verticalLineList.push({id:"verticalLine"+e.verticalLineList.length+1,title:t.site+"px",left:t.site});break;default:break}}))}}},_=z,L=(i("60ab"),Object(c["a"])(_,S,O,!1,null,"b07c55f8",null)),j=L.exports,q=i("6e0e");i("6b54");var P=i("3693"),M=i("183a"),T=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.componentdata}},[i("el-table-column",{attrs:{type:"index",width:"50"}}),i("el-table-column",{attrs:{prop:"username",label:"创建人",width:"100"}}),i("el-table-column",{attrs:{prop:"showname",label:"创建人",width:"100"}}),i("el-table-column",{attrs:{prop:"projectname",label:"项目名称",width:"280"}}),i("el-table-column",{attrs:{prop:"create_date",label:"日期",width:"150"}}),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(i){return t.handleClick(e.row)}}},[t._v("导入")]),i("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(i){return t.delClick(e.row)}}},[t._v("删除")])]}}])})],1),i("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.totalnum},on:{"current-change":t.currentchange}})],1)},E=[],B={name:"Topotable",components:{},props:{componentdata:{},totalnum:{type:Number}},data:function(){return{page_size:10,current_page:1}},mounted:function(){console.log(this.componentdata)},methods:{currentchange:function(t){this.$emit("getData",t)},delClick:function(t){this.$emit("delClick",t)},handleClick:function(t){this.$emit("handleClick",t)}}},$=B,F=Object(c["a"])($,T,E,!1,null,null,null),R=F.exports;function W(t,e){var i=t.x+t.width/2,o=t.y+t.height/2,n=t.width,a=t.height,s=e.x+e.width/2,r=e.y+e.height/2,l=e.width,c=e.height;return Math.abs(i-s)<(n+l)/2&&Math.abs(o-r)<(a+c)/2}var H=i("2f62");i("bc3a");function X(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function N(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?X(Object(i),!0).forEach((function(e){I()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):X(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var Y={name:"TopoMain",extends:q["a"],components:{VueRulerTool:j,Topotable:R},props:[],computed:N(N({},Object(H["d"])({topoEditor:function(t){return t.topoEditor.topoData},topoData:function(t){return t.topoEditor.topoData},topoDatademo:function(t){return t.topoEditor.selectedComponentMapdemo},selectedComponents:function(t){return t.topoEditor.selectedComponents},selectedComponentMap:function(t){return t.topoEditor.selectedComponentMap},configData:function(t){return t.topoEditor.topoData},selectedIsLayer:function(t){return t.topoEditor.selectedIsLayer},copySrcItems:function(t){return t.topoEditor.copySrcItems},copyCount:function(t){return t.topoEditor.copyCount}})),{},{layerStyle:function(){var t=this.selectedValue/100,e=["transform:scale(".concat(t,")")];this.configData.layer.backColor&&e.push("background-color: ".concat(this.configData.layer.backColor)),this.configData.layer.backgroundImage&&e.push('background-image: url("'.concat(this.configData.layer.backgroundImage,'")')),this.configData.layer.width>0&&e.push("width: ".concat(this.configData.layer.width,"px")),this.configData.layer.height>0&&e.push("height: ".concat(this.configData.layer.height,"px"));var i=e.join(";");return i}}),data:function(){return{alert_two:!1,alert:!1,isname:!0,moveItem:{startX:0,startY:0},resizeItem:{startPx:0,startPy:0,x:0,y:0,w:0,h:0},frameSelectionDiv:{width:0,height:0,top:10,left:10,startX:0,startY:0,startPageX:0,startPageY:0},flag:"",curControl:null,curIndex:-1,selectedValue:100,index:"",dataLine:[],columns:[{}],componentdata:[],showname:"",shownamev:"",projectname:"",page_size:10,current_page:1,totalnum:0}},methods:N(N(N({},Object(H["c"])("topoEditor",["setSelectedComponent","addSelectedComponent","removeSelectedComponent","clearSelectedComponent","setLayerSelected","setCopySrcItems","increaseCopyCount","setdemo","execute","undo","redo","gettopoEditor","gettopoDataname"])),Object(H["b"])("topoEditor",["loadDefaultTopoData"])),{},{controlMousedown:function(t,e,i){if(console.log(t),console.log("index====="+i),this.index=i,console.log(this.selectedComponentMap),!e.ctrlKey)for(var o in this.flag="move",this.curControl=t,this.clickItem(t,i),this.moveItem.startX=e.pageX,this.moveItem.startY=e.pageY,this.selectedComponentMap){t=this.selectedComponentMap[o];t.style.temp={},t.style.temp.position={},t.style.temp.position.x=t.style.position.x,t.style.temp.position.y=t.style.position.y}},resizeMousedown:function(t,e,i,o){this.flag=o,this.curControl=t,this.curIndex=i,this.clickItem(t,i);event.currentTarget;this.resizeItem.startPx=event.pageX,this.resizeItem.startPy=event.pageY,this.resizeItem.x=this.curControl.style.position.x,this.resizeItem.y=this.curControl.style.position.y,this.resizeItem.w=this.curControl.style.position.w,this.resizeItem.h=this.curControl.style.position.h},onLayerMousemove:function(t){if(1==t.which){if(""!=this.flag)if(this.flag.startsWith("resize")){var e=t.pageX-this.resizeItem.startPx,i=t.pageY-this.resizeItem.startPy;switch(this.flag){case"resize-lt":this.curControl.style.position.x=this.resizeItem.x+e,this.curControl.style.position.y=this.resizeItem.y+i,e=-e,i=-i;break;case"resize-lc":this.curControl.style.position.x=this.resizeItem.x+e,i=0,e=-e;break;case"resize-lb":this.curControl.style.position.x=this.resizeItem.x+e,e=-e;break;case"resize-rt":this.curControl.style.position.y=this.resizeItem.y+i,i=-i;break;case"resize-rc":i=0;break;case"resize-rb":break;case"resize-ct":this.curControl.style.position.y=this.resizeItem.y+i,e=0,i=-i;break;case"resize-cb":e=0;break}this.resizeItem.w+e>20&&(this.curControl.style.position.w=this.resizeItem.w+e),this.resizeItem.h+i>20&&(this.curControl.style.position.h=this.resizeItem.h+i),this.$nextTick((function(){var t=this.$refs["comp"+this.curIndex][0];t.onResize(),console.log("nextTick")}))}else if("move"==this.flag){e=t.pageX-this.moveItem.startX,i=t.pageY-this.moveItem.startY;for(var o in this.selectedComponentMap){var n=this.selectedComponentMap[o];n.style.position.x=n.style.temp.position.x+e,n.style.position.y=n.style.temp.position.y+i}}else"frame_selection"==this.flag&&this.onFrameSelection(t)}else this.flag=""},onLayerMouseup:function(t){if(this.flag.startsWith("resize")){var e=this.$refs["comp"+this.curIndex][0];e.onResize()}else if("frame_selection"==this.flag)this.onFrameSelection(t),this.frameSelectionDiv.width=0,this.frameSelectionDiv.height=0,this.frameSelectionDiv.top=0,this.frameSelectionDiv.left=0;else if("move"==this.flag){var i=t.pageX-this.moveItem.startX,o=t.pageY-this.moveItem.startY;for(var n in this.selectedComponentMap){var a=this.selectedComponentMap[n];a.style.position.x=a.style.position.x-i,a.style.position.y=a.style.position.y-o}this.execute({op:"move",dx:i,dy:o,items:this.selectedComponentMap})}this.flag=""},onLayerMousedown:function(t){console.log("onLayerMousedown"),this.flag="frame_selection",this.frameSelectionDiv.startX=event.offsetX,this.frameSelectionDiv.startY=event.offsetY,this.frameSelectionDiv.startPageX=event.pageX,this.frameSelectionDiv.startPageY=event.pageY},onLayerClick:function(){},onFrameSelection:function(t){var e=t.pageX-this.frameSelectionDiv.startPageX,i=t.pageY-this.frameSelectionDiv.startPageY;this.frameSelectionDiv.width=Math.abs(e),this.frameSelectionDiv.height=Math.abs(i),e>0&&i>0?(this.frameSelectionDiv.top=this.frameSelectionDiv.startY,this.frameSelectionDiv.left=this.frameSelectionDiv.startX):e>0&&i<0?(this.frameSelectionDiv.top=this.frameSelectionDiv.startY+i,this.frameSelectionDiv.left=this.frameSelectionDiv.startX):e<0&&i>0?(this.frameSelectionDiv.top=this.frameSelectionDiv.startY,this.frameSelectionDiv.left=this.frameSelectionDiv.startX+e):e<0&&i<0&&(this.frameSelectionDiv.top=this.frameSelectionDiv.startY+i,this.frameSelectionDiv.left=this.frameSelectionDiv.startX+e);var o=this,n={x:this.frameSelectionDiv.left,y:this.frameSelectionDiv.top,width:this.frameSelectionDiv.width,height:this.frameSelectionDiv.height},a=this.configData.components;a.forEach((function(t){var e={x:t.style.position.x,y:t.style.position.y,width:t.style.position.w,height:t.style.position.h};W(n,e)?o.addSelectedComponent(t):o.removeSelectedComponent(t)})),this.selectedComponents.length>0?this.setLayerSelected(!1):this.setLayerSelected(!0)},onDrop:function(t){t.preventDefault();var e=t.dataTransfer.getData("my-info"),i=JSON.parse(e);if(i.position={dataLine:this.dataLine},0!=this.checkAddComponent(i)){if("surface-edit-layer"==t.target.id)i.style.position.x=t.offsetX,i.style.position.y=t.offsetY;else{var o=t.currentTarget,n=o.getBoundingClientRect(),a=t.clientX-n.left,s=t.clientY-n.top;i.style.position.x=a,i.style.position.y=s}this.execute({op:"add",component:i}),this.clickItem(i,this.configData.components.length-1)}},moveItems:function(t){var e=0,i=0;"up"==t?i=-5:"right"==t?e=5:"down"==t?i=5:"left"==t&&(e=-5),this.execute({op:"move",dx:e,dy:i,items:this.selectedComponentMap})},checkAddComponent:function(t){return null!=t||(this.$q.notify({type:"negative",position:"bottom-right",message:"This component not surpport."}),!1)},parseView:function(t){return P["a"].parseViewName(t)},clickItem:function(t,e){this.setLayerSelected(!1),console.log(t),console.log("index"+e),void 0==this.selectedComponentMap[t.identifier]&&this.setSelectedComponent(t)},clickComponent:function(t,e,i){1==i.ctrlKey&&(this.setLayerSelected(!1),void 0==this.selectedComponentMap[e.identifier]?this.addSelectedComponent(e):this.removeSelectedComponent(e))},copyItem:function(){var t=[];for(var e in this.selectedComponentMap){var i=Object(M["a"])(this.selectedComponentMap[e]);t.push(i)}this.setCopySrcItems(t)},pasteItem:function(){this.copySrcItems&&this.copySrcItems.length>0&&this.execute({op:"copy-add",items:this.copySrcItems})},removeItem:function(t,e){console.log(t),console.log(e),this.execute({op:"del",index:t}),this.setLayerSelected(!0)},fullScreen:function(){localStorage.setItem("topoData",JSON.stringify(this.configData));var t=this.$router.resolve({path:"/fullscreen",name:"TopoFullscreen",query:{sceneId:this.sceneId,sceneName:this.sceneName},params:{sceneId:this.sceneId,sceneName:this.sceneName}}),e=t.href;window.open(e,"_blank")},printData:function(){var t=this.topoData;t.components=[],console.log(this.topoData),this.gettopoEditor(t)},showdialog:function(){this.projectname=this.configData.name,this.alert_two=!0},saveData:function(){var t=this,e=""===this.showname?this.shownamev:this.showname;console.log(localStorage.getItem("user_account")),this.$axios.post("/api/drag/add",{username:localStorage.getItem("user_account"),showname:e,projectname:t.projectname,dargjsondata:JSON.stringify(this.configData)}).then((function(e){console.log(e),200==e.data.ret_code&&(t.alert_two=!1,t.$message({message:"添加成功",type:"success"}))})),localStorage.setItem("topoData",JSON.stringify(this.configData))},getDataClick:function(){this.getData()},getData:function(t){var e=this,i=this;console.log(t),this.current_page=t||this.current_page,this.$axios.post("/api/drag/list",{username:localStorage.getItem("user_account"),page_size:this.page_size,current_page:this.current_page}).then((function(t){console.log(t.data.extra),i.componentdata=t.data.extra,e.totalnum=t.data.total})),this.alert=!0},pctclosedialog:function(){this.alert=!1},handleClick:function(t){console.log(t);var e=JSON.parse(t.dargjsondata);this.gettopoEditor(e),this.alert=!1},changetopoDataname:function(){this.gettopoDataname(this.projectname)},delClick:function(t){var e=this;console.log(t._id);var i=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i.$axios.post("/api/drag/del",{id:t._id}).then((function(t){i.getData(),e.$message({type:"success",message:"删除成功!"})}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},currentchange:function(){}}),mounted:function(){this.$axios.post("http://localhost:3000/api/user/add",{username:"woshi",password:"11222",email:"ddddd"}).then((function(t){console.log(t)})),this.shownamev=localStorage.getItem("user_account"),this.isname=this.topoDatademo,this.loadDefaultTopoData()}},K=Y,A=(i("29ed"),Object(c["a"])(K,C,k,!1,null,null,null)),V=A.exports,J=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"topo-properties"},[i("div",{staticClass:"topo-properties-nav"},[t.isLayer?[i("q-input",{on:{change:t.changetopoData},model:{value:t.topoDataname,callback:function(e){t.topoDataname=e},expression:"topoDataname"}})]:t._e(),null!=t.configObject&&0==t.isLayer?[i("q-input",{model:{value:t.configObject.name,callback:function(e){t.$set(t.configObject,"name",e)},expression:"configObject.name"}})]:t._e()],2),null!=t.configObject&&0==t.isLayer?[i("div",{staticClass:"topo-properties-tabs"},[i("div",{staticClass:"topo-properties-tab",class:{"topo-properties-tab-active":0==t.tabIndex},on:{click:function(e){return t.changeTab(0)}}},[t._v("样式")]),i("div",{staticClass:"topo-properties-tab",class:{"topo-properties-tab-active":1==t.tabIndex},on:{click:function(e){return t.changeTab(1)}}},[t._v("数据")]),i("div",{staticClass:"topo-properties-tab",class:{"topo-properties-tab-active":2==t.tabIndex},on:{click:function(e){return t.changeTab(2)}}},[t._v("行为")])]),i("div",{staticClass:"topo-properties-table"},[i("div",{directives:[{name:"show",rawName:"v-show",value:0==t.tabIndex,expression:"tabIndex == 0"}]},[t._m(0),i("q-list",{attrs:{separator:"","no-border":""}},[i("q-expansion-item",{attrs:{label:"Position","default-opened":""}},[i("table",[i("tr",[i("td",{attrs:{width:"50%"}},[t._v("X轴")]),i("td",{attrs:{width:"50%"}},[i("q-input",{staticStyle:{"padding-right":"5px"},attrs:{type:"number",suffix:"px"},model:{value:t.configObject.style.position.x,callback:function(e){t.$set(t.configObject.style.position,"x",e)},expression:"configObject.style.position.x"}})],1)]),i("tr",[i("td",[t._v("Y轴")]),i("td",[i("q-input",{staticStyle:{"padding-right":"5px"},attrs:{type:"number",suffix:"px"},model:{value:t.configObject.style.position.y,callback:function(e){t.$set(t.configObject.style.position,"y",e)},expression:"configObject.style.position.y"}})],1)]),i("tr",[i("td",[t._v("宽")]),i("td",[i("q-input",{staticStyle:{"padding-right":"5px"},attrs:{type:"number",suffix:"px"},model:{value:t.configObject.style.position.w,callback:function(e){t.$set(t.configObject.style.position,"w",e)},expression:"configObject.style.position.w"}})],1)]),i("tr",[i("td",[t._v("高")]),i("td",[i("q-input",{staticStyle:{"padding-right":"5px"},attrs:{type:"number",suffix:"px"},model:{value:t.configObject.style.position.h,callback:function(e){t.$set(t.configObject.style.position,"h",e)},expression:"configObject.style.position.h"}})],1)])])]),i("q-expansion-item",{attrs:{label:"边线","default-opened":""}},[i("table",[i("tr",[i("td",{attrs:{width:"50%"}},[t._v("边线宽")]),i("td",{attrs:{width:"50%"}},[i("q-input",{staticStyle:{"padding-right":"5px"},attrs:{type:"number",suffix:"px"},model:{value:t.configObject.style.borderWidth,callback:function(e){t.$set(t.configObject.style,"borderWidth",e)},expression:"configObject.style.borderWidth"}})],1)]),i("tr",[i("td",[t._v("边线样式")]),i("td",[i("q-select",{attrs:{options:t.borderStyleOptions},model:{value:t.configObject.style.borderStyle,callback:function(e){t.$set(t.configObject.style,"borderStyle",e)},expression:"configObject.style.borderStyle"}})],1)]),i("tr",[i("td",[t._v("边线颜色")]),i("td",[i("q-input",{staticClass:"my-input",attrs:{filled:""},scopedSlots:t._u([{key:"append",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"colorize"}},[i("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[i("q-color",{model:{value:t.configObject.style.borderColor,callback:function(e){t.$set(t.configObject.style,"borderColor",e)},expression:"configObject.style.borderColor"}})],1)],1)]},proxy:!0}],null,!1,643874885),model:{value:t.configObject.style.borderColor,callback:function(e){t.$set(t.configObject.style,"borderColor",e)},expression:"configObject.style.borderColor"}})],1)])])]),i("q-expansion-item",{attrs:{label:"Base","default-opened":""}},[i("table",[i("tr",[i("td",{attrs:{width:"50%"}},[t._v("可见")]),i("td",{attrs:{width:"50%"}},[i("q-select",{attrs:{options:[{label:"显示",value:!0},{label:"隐藏",value:!1}]},model:{value:t.configObject.style.visible,callback:function(e){t.$set(t.configObject.style,"visible",e)},expression:"configObject.style.visible"}})],1)]),i("tr",[i("td",[t._v("z-index")]),i("td",[i("q-input",{attrs:{type:"number"},model:{value:t.configObject.style.zIndex,callback:function(e){t.$set(t.configObject.style,"zIndex",e)},expression:"configObject.style.zIndex"}})],1)]),i("tr",[i("td",[t._v("Rolate")]),i("td",[i("q-input",{staticStyle:{"padding-right":"5px"},attrs:{type:"number",suffix:"deg"},model:{value:t.configObject.style.transform,callback:function(e){t.$set(t.configObject.style,"transform",e)},expression:"configObject.style.transform"}})],1)]),i("tr",[i("td",[t._v("BackColor")]),i("td",[i("q-input",{staticClass:"my-input",attrs:{filled:""},scopedSlots:t._u([{key:"append",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"colorize"}},[i("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[i("q-color",{model:{value:t.configObject.style.backColor,callback:function(e){t.$set(t.configObject.style,"backColor",e)},expression:"configObject.style.backColor"}})],1)],1)]},proxy:!0}],null,!1,1464291938),model:{value:t.configObject.style.backColor,callback:function(e){t.$set(t.configObject.style,"backColor",e)},expression:"configObject.style.backColor"}})],1)]),void 0!=t.configObject.style.url&&null!=t.configObject.style.url?i("tr",[i("td",[t._v("URL")]),i("td",[i("q-input",{model:{value:t.configObject.style.url,callback:function(e){t.$set(t.configObject.style,"url",e)},expression:"configObject.style.url"}})],1)]):t._e(),void 0!=t.configObject.style.text?i("tr",[i("td",[t._v("Text")]),i("td",[i("q-input",{model:{value:t.configObject.style.text,callback:function(e){t.$set(t.configObject.style,"text",e)},expression:"configObject.style.text"}})],1)]):t._e(),void 0!=t.configObject.style.textAlign?i("tr",[i("td",[t._v("TextAlign")]),i("td",[i("q-select",{attrs:{options:t.textAlignOptions},model:{value:t.configObject.style.textAlign,callback:function(e){t.$set(t.configObject.style,"textAlign",e)},expression:"configObject.style.textAlign"}})],1)]):t._e(),i("tr",[i("td",[t._v("ForeColor")]),i("td",[i("q-input",{staticClass:"my-input",attrs:{filled:""},scopedSlots:t._u([{key:"append",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"colorize"}},[i("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[i("q-color",{model:{value:t.configObject.style.foreColor,callback:function(e){t.$set(t.configObject.style,"foreColor",e)},expression:"configObject.style.foreColor"}})],1)],1)]},proxy:!0}],null,!1,1401579127),model:{value:t.configObject.style.foreColor,callback:function(e){t.$set(t.configObject.style,"foreColor",e)},expression:"configObject.style.foreColor"}})],1)]),void 0!=t.configObject.style.fontFamily?i("tr",[i("td",[t._v("Font Family")]),i("td",[i("q-select",{attrs:{options:t.fontFamilyOptions},model:{value:t.configObject.style.fontFamily,callback:function(e){t.$set(t.configObject.style,"fontFamily",e)},expression:"configObject.style.fontFamily"}})],1)]):t._e(),void 0!=t.configObject.style.fontSize?i("tr",[i("td",[t._v("Font Size")]),i("td",[i("q-input",{staticStyle:{"padding-right":"5px"},attrs:{type:"number",suffix:"px"},model:{value:t.configObject.style.fontSize,callback:function(e){t.$set(t.configObject.style,"fontSize",e)},expression:"configObject.style.fontSize"}})],1)]):t._e(),void 0!=t.configObject.style.radius?i("tr",[i("td",[t._v("Radius")]),i("td",[i("q-input",{attrs:{type:"number"},model:{value:t.configObject.style.radius,callback:function(e){t.$set(t.configObject.style,"radius",e)},expression:"configObject.style.radius"}})],1)]):t._e(),void 0!=t.configObject.style.lineWidth?i("tr",[i("td",[t._v("LineWidth")]),i("td",[i("q-input",{staticStyle:{"padding-right":"5px"},attrs:{type:"number",suffix:"px"},model:{value:t.configObject.style.lineWidth,callback:function(e){t.$set(t.configObject.style,"lineWidth",e)},expression:"configObject.style.lineWidth"}})],1)]):t._e()])])],1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:1==t.tabIndex,expression:"tabIndex == 1"}]},[i("div",{staticClass:"not-surpport"},[i("h5",[t._v("根据实际系统设计")]),i("q-select",{attrs:{value:t.valOputions,options:t.axiosUrlStyleOptions},on:{input:t.chengeval}})],1)]),i("div",{directives:[{name:"show",rawName:"v-show",value:2==t.tabIndex,expression:"tabIndex == 2"}]},[t.configObject&&t.configObject.action?[t._l(t.configObject.action,(function(e,o){return[i("div",{key:o,staticStyle:{"margin-top":"10px"}},[i("div",{staticStyle:{padding:"5px","border-left":"#ccc solid 1px","border-right":"#ccc solid 1px","border-top":"#ccc solid 1px"}},[t._v("\n                交互-"+t._s(o+1)+"\n                "),i("q-icon",{staticStyle:{float:"right",cursor:"pointer"},attrs:{name:"delete",color:"negative"},nativeOn:{click:function(e){return t.removeAction(o)}}})],1),i("table",[i("tr",[i("td",{attrs:{width:"50%"}},[t._v("事件")]),i("td",{attrs:{width:"50%"}},[i("q-select",{attrs:{"emit-value":"","map-options":"","option-label":"label","option-disable":function(t){return null===t||t.cannotSelect},options:[{label:"点击",value:"click"},{label:"双击",value:"dblclick"},{label:"鼠标移入",value:"mouseenter",cannotSelect:!0},{label:"鼠标双击",value:"mouseleave",cannotSelect:!0}]},model:{value:e.type,callback:function(i){t.$set(e,"type",i)},expression:"event.type"}})],1)]),i("tr",[i("td",[t._v("动作")]),i("td",[i("q-select",{attrs:{"emit-value":"","map-options":"","option-label":"label","option-disable":function(t){return null===t||t.cannotSelect},options:[{label:"打开链接",value:"link",cannotSelect:!0},{label:"赋值变量",value:"val",cannotSelect:!0},{label:"展示隐藏",value:"visible"},{label:"调用服务",value:"service",cannotSelect:!0}]},model:{value:e.action,callback:function(i){t.$set(e,"action",i)},expression:"event.action"}})],1)]),"visible"==e.action?i("tr",[i("td",[t._v("点击出现")]),i("td",[i("q-select",{attrs:{filled:"","emit-value":"",multiple:"","use-chips":"","map-options":"","option-label":"label",options:t.generateTargetComponentOptions()},model:{value:e.showItems,callback:function(i){t.$set(e,"showItems",i)},expression:"event.showItems"}})],1)]):t._e(),"visible"==e.action?i("tr",[i("td",[t._v("点击隐藏")]),i("td",[i("q-select",{attrs:{filled:"","emit-value":"",multiple:"","use-chips":"","map-options":"","option-label":"label",options:t.generateTargetComponentOptions()},model:{value:e.hideItems,callback:function(i){t.$set(e,"hideItems",i)},expression:"event.hideItems"}})],1)]):t._e()])])]})),i("div",{staticStyle:{width:"100%",padding:"10px 10px 10px 10px"}},[i("q-btn",{staticStyle:{width:"100%"},attrs:{label:"Add",outline:""},on:{click:t.addAction}})],1)]:t._e()],2)])]:t._e(),t.isLayer?[i("table",{staticStyle:{"margin-top":"10px"}},[i("tr",[i("td",{attrs:{width:"40%"}},[t._v("BackColor")]),i("td",[i("q-input",{model:{value:t.topoData.layer.backColor,callback:function(e){t.$set(t.topoData.layer,"backColor",e)},expression:"topoData.layer.backColor"}})],1)]),i("tr",[i("td",[t._v("BackImage")]),i("td",[i("q-input",{model:{value:t.topoData.layer.backgroundImage,callback:function(e){t.$set(t.topoData.layer,"backgroundImage",e)},expression:"topoData.layer.backgroundImage"}})],1)]),i("tr",[i("td",[t._v("分辨率")]),i("td",[i("q-select",{attrs:{options:t.whOptions},model:{value:t.layerWH,callback:function(e){t.layerWH=e},expression:"layerWH"}})],1)]),"custom"==t.layerWH?i("tr",[i("td",[t._v("W")]),i("td",[i("q-input",{model:{value:t.topoData.layer.width,callback:function(e){t.$set(t.topoData.layer,"width",e)},expression:"topoData.layer.width"}})],1)]):t._e(),"custom"==t.layerWH?i("tr",[i("td",[t._v("H")]),i("td",[i("q-input",{model:{value:t.topoData.layer.height,callback:function(e){t.$set(t.topoData.layer,"height",e)},expression:"topoData.layer.height"}})],1)]):t._e()])]:t._e()],2)},U=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("table",{staticStyle:{display:"none"}},[i("tr",[i("td",{staticStyle:{padding:"5px 0px","background-color":"#eee"},attrs:{width:"50%"}},[t._v("属性")]),i("td",{staticStyle:{padding:"5px 0px","background-color":"#eee"},attrs:{width:"50%"}},[t._v("值")])])])}],G=i("a34a"),Q=i.n(G),Z=(i("96cf"),i("c973")),tt=i.n(Z);i("28a5");function et(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function it(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?et(Object(i),!0).forEach((function(e){I()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):et(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var ot={name:"TopoProperties",data:function(){return{tabIndex:0,fontFamilyOptions:["Arial","Helvetica","sans-serif","宋体","黑体","微软雅黑"],textAlignOptions:["left","right","center","justify"],borderStyleOptions:["solid","dashed","dotted"],axiosUrlStyleOptions:["固定数据","服务器数据","http3"],whOptions:["1024x768","1366x768","1280x800","1440x900","1600x900","1920x1080","custom"],layerWHTemp:"",valOputions:"",position:{dataLine:[1130,50,100,500,600,300,100],xdata:[10,20,30,60,50,30]},topoDataname:""}},computed:it({layerWH:{get:function(){if(this.topoData.layer.width&&this.topoData.layer.height||(this.topoData.layer.width=1600,this.topoData.layer.height=900),""==this.layerWHTemp){var t=this.topoData.layer.width+"x"+this.topoData.layer.height;-1==this.whOptions.indexOf(t,0)?this.layerWHTemp="custom":this.layerWHTemp=t}else{t=this.topoData.layer.width+"x"+this.topoData.layer.height;-1==this.whOptions.indexOf(t,0)&&(this.layerWHTemp="custom")}return this.layerWHTemp},set:function(t){if(console.log(t),console.log(this),this.layerWHTemp=t,"custom"==t);else{var e=t.split("x");this.topoData.layer.width=parseInt(e[0]),this.topoData.layer.height=parseInt(e[1])}}}},Object(H["d"])({topoDatademo:function(t){return t.topoEditor.selectedComponentMapdemo},topoData:function(t){return t.topoEditor.topoData},selectedComponents:function(t){return t.topoEditor.selectedComponents},selectedComponentMap:function(t){return t.topoEditor.selectedComponentMap},isLayer:function(t){return t.topoEditor.selectedIsLayer},configObject:function(t){return t.topoEditor.selectedComponent}})),methods:it(it({},Object(H["c"])("topoEditor",["setdemo","setSelectedComponent","gettopoDataname"])),{},{chengeval:function(t){var e=this;return tt()(Q.a.mark((function i(){var o,n,a;return Q.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:for(o in e.valOputions=t,e.selectedComponentMap)n=e.selectedComponentMap[o];if(n.position.xdata=[],n.position.dataLine=[],"固定数据"!==e.valOputions){i.next=8;break}n.position=e.position,i.next=13;break;case 8:if("服务器数据"!==e.valOputions){i.next=13;break}return a={devunit_name:"donghai_6_2",var_name:"功率"},e,i.next=13,e.$axios.post("api/gateway/minute1/list",a).then((function(t){n.position.xdata=t.data.extra.timeList,n.position.dataLine=t.data.extra.dataList}));case 13:e.setSelectedComponent(n),e.setdemo(!1),e.$nextTick((function(){this.setdemo(!0)}));case 16:case"end":return i.stop()}}),i)})))()},initPage:function(t){this.configData=t},changeTab:function(t){this.tabIndex=t},bindData:function(t,e,i){console.log("bindData"),this.configObject=t,this.isLayer=i},generateTargetComponentOptions:function(){var t=this,e=[];return this.topoData.components.forEach((function(i){t.configObject.identifier!=i.identifier&&e.push({label:i.name||i.type,value:i.identifier})})),e},removeAction:function(t){this.configObject.action.splice(t,1)},addAction:function(){var t={type:"click",action:"visible",showItems:[],hideItems:[]};this.configObject.action.push(t)},changetopoData:function(){this.gettopoDataname(this.topoDataname),console.log(this.topoData.name)}}),mounted:function(){this.topoDataname=this.topoData.name,console.log(this.isScaleRevise)}},nt=ot,at=(i("de83"),Object(c["a"])(nt,J,U,!1,null,null,null)),st=at.exports,rt={name:"TopoEditor",components:{WresizePanel3:d,TopoToolbox:w,TopoMain:V,TopoProperties:st},data:function(){return{}},methods:{}},lt=rt,ct=(i("d449"),Object(c["a"])(lt,o,n,!1,null,null,null));e["default"]=ct.exports}}]);